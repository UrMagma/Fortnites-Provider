<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fortnite Modding Vault</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<style>
:root {
  --theme-bg: #121212;
  --theme-panel: #1a1a1a;
  --theme-border: #23272e;
  --theme-card-glow: rgba(0, 120, 255, 0.5); /* Epic blue glow */
  --theme-text: #ffffff;
  --theme-text-secondary: #b7b7b7;
}

body {
  background-color: var(--theme-bg);
  color: var(--theme-text);
  font-family: "Segoe UI", Arial, sans-serif;
  position: relative;
  z-index: 1;
}

.sidebar {
  background: var(--theme-panel);
  border-right: 1px solid var(--theme-border);
  box-shadow: 2px 0 16px 0 rgba(0,0,0,0.5);
}

button, .card {
  background: var(--theme-panel);
  border: 1px solid var(--theme-border);
  color: var(--theme-text);
  transition: border-color 0.3s, box-shadow 0.3s, background 0.3s;
  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.16);
}

button:hover, .card:hover {
  border-color: var(--theme-card-glow);
  box-shadow: 0 0 16px var(--theme-card-glow), 0 2px 16px 0 rgba(0,0,0,0.36);
  background: #181f26;
}

h1, h2, h3 {
  color: var(--theme-text);
  letter-spacing: 0.01em;
}

p {
  color: var(--theme-text-secondary);
}

/* Epic Games Launcher blue glow overlay */
.page-glow-overlay {
  pointer-events: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 0;
  background: radial-gradient(
    circle at var(--x,50%) var(--y,50%),
    rgba(0,120,255,0.08) 0%,
    rgba(0,120,255,0.04) 40%,
    transparent 80%
  );
  transition: background-position 0.2s;
}

/* Outline blue glow for cards and buttons */
.outline-glow {
  position: relative;
  z-index: 1;
}
.outline-glow::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 2px;
  background: radial-gradient(
    circle at var(--x, 100%) var(--y, 100%),
    var(--theme-card-glow) 0%,
    transparent 80%
  );
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.outline-glow.active::before {
  opacity: 1;
}

/* Card and button border radius and spacing */
.card-gradient-border {
  border-radius: 1.5rem;
  background-clip: padding-box;
  position: relative;
  box-shadow: none;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  background-color: transparent;
  isolation: isolate;
  -webkit-mask-composite: exclude;
  mask-composite: exclude;
  position: relative;
  z-index: 1;
}

button.w-full.text-left {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
  border-radius: 0.75rem;
  overflow: visible;
  background-color: transparent;
  isolation: isolate;
  -webkit-mask-composite: exclude;
  mask-composite: exclude;
  position: relative;
  z-index: 1;
}

.sidebar-icon-img {
  width: 20px;
  height: 20px;
  border-radius: 0.5rem;
  object-fit: cover;
  background: transparent 95%;
  flex-shrink: 0;
  margin-right: 0.75rem;
  box-shadow: 0 0 4px 0 rgba(0,120,255,0.15);
}

.sidebar-right-glow {
  position: absolute;
  top: 0;
  right: 0;
  width: 2px;
  height: 100%;
  background: linear-gradient(
    180deg,
    var(--theme-card-glow) 0%,
    rgba(0,0,0,0) 50%,
    var(--theme-card-glow) 100%
  );
  filter: blur(4px);
  pointer-events: none;
  transition: background 0.3s ease;
  z-index: 3;
}

aside {
  border-right: none !important;
}
</style>
</head>
<body class="bg-black text-white">
<div class="page-glow-overlay"></div>
<div id="root" style="position: relative; z-index: 1;"></div>
<script>
const e = React.createElement;
const { useState, useEffect, useRef } = React;

/* Data */
// ==========================
// How to add new projects:
// ==========================
// - Each key in the 'projects' object is a category, e.g. 'dll', 'backend', 'launcher', 'sdk', 'tools', etc.
// - To add a new project to a category, add a new object to the corresponding array.
// - Each project object can have:
//   - title: String (required)
//   - description: String (required)
//   - repo: String (optional, URL to repository)
//   - discord: String (optional, URL to Discord)
//
// Example: Adding new projects to multiple categories:
//
// projects.dll.push({
//   title: "Another DLL",
//   description: "Description for another DLL project.",
//   repo: "https://github.com/example/another-dll",
//   discord: "https://discord.gg/another"
// });
//
// projects.backend.push({
//   title: "Backend Project Example",
//   description: "A backend for Fortnite mods.",
//   repo: "https://github.com/example/backend",
//   discord: "https://discord.gg/backend"
// });
//
// - Projects added in this way will automatically show in the UI under their category tab.
// - You can add as many projects as you want to each category.
//
// ==========================
const projects = {
  dll: [
    {
      title: "Raider 3.5",
      description: "Fortnitev3.5 SDK based game server.",
      repo: "https://github.com/kem0x/raider3.5",
      image: "https://avatars.githubusercontent.com/u/19430119?v=4",
      // Example images for screenshots
      images: [
        "https://gamingbolt.com/wp-content/uploads/2018/02/Fortnite.jpg"
      ]
      // discordMemberCount: 1532 // Example count
    },
    {
      title: "Universal Walking Simulator",
      description: "Fortnite season 1-19 game server.",
      repo: "https://github.com/Milxnor/Universal-Walking-Simulator",
      image: "https://avatars.githubusercontent.com/u/84999745?v=4",
      images: [
        "https://static.wikia.nocookie.net/fortnite/images/b/be/Key_Art_-_Battle_Pass_Season_10_-_Fortnite.jpg/revision/latest/scale-to-width-down/1200?cb=20190801082806"
      ]
    },
    {
      title: "Cobalt",
      description: "Universal SSL Bypass for Fortnite, made by Milxnor.",
      repo: "https://github.com/Milxnor/Cobalt",
      image: "https://avatars.githubusercontent.com/u/84999745?v=4"
      // No images for this
    },
    {
      title: "OGS 15.50",
      description: "Fortnite 15.50 game server.",
      repo: "https://github.com/MarvelcoOGFN/OGS-15.50",
      image: "https://avatars.githubusercontent.com/u/202451621?v=4"
    },
    {
      title: "12.61 Gameserver",
      description: "Fortnite 12.61 game server.",
      repo: "https://github.com/MarvelcoOGFN/12.61-Gameserver",
      image: "https://avatars.githubusercontent.com/u/202451621?v=4"
    },
    {
      title: "Celestia GS",
      description: "Fortnite 13.40 game server.",
      repo: "https://github.com/plooshi/CelestiaGS",
      image: "https://avatars.githubusercontent.com/u/56302322?v=4"
    },
    {
      title: "OGS 12.41",
      description: "Fortnite 12.41 game server.",
      repo: "https://github.com/MarvelcoOGFN/OGS-12.41",
      image: "https://avatars.githubusercontent.com/u/202451621?v=4"
    },
    {
      title: "1.7.2 GS",
      description: "Fortnite 1.7.2 game server.",
      repo: "https://github.com/plooshi/1.7.2",
      image: "https://avatars.githubusercontent.com/u/56302322?v=4"
    },

    // Add more DLL projects here
  ],
  projects: [
    {
      title: "Project OldNite",
      description: "Friendly, with server hosting on early chapter one seasons. Testers are needed, to test dm @firetog2.0 on discord.",
      //discord: "https://discord.gg/HAZy6SHya4",
      image: "https://cdn.discordapp.com/attachments/1409328839972225117/1409330101304295484/ChatGPT_Image_5_aout_2025_19_20_14.png?ex=68acfc70&is=68abaaf0&hm=809a9a6a3bce924d69b45e3bdabff0cae4c2af097c05679c1c1768991f448f86&",
      bubble: { text: "Coming Soon", color: "#0080ff" }
    },
    {
      title: "Project Reboot",
      description: "Made by Milxnor, and many others.",
      repo: "https://github.com/Milxnor/Project-Reboot-3.0",
      discord: "https://discord.gg/H9sGkxBThS",
      image: "https://pbs.twimg.com/profile_images/1934351954505052160/mUca_K1Q_400x400.jpg",
      bubble: { text: "Verified", color: "#00ff80" }
    },
    {
      title: "Era",
      description: "Project Era, the oldest hosting server. Made by dani, and Benji.",
      discord: "https://discord.gg/erafn",
      image: "https://cdn2.steamgriddb.com/grid/7eb374c4c89c32d0fa63c2b4af5eefdc.png",
      bubble: { text: "Verified", color: "#00ff80" }
    },
    {
      title: "Aera",
      description: "Join now and relieve the Ch1 S2 just like it was in 2017!",
      bubble: { text: "Verified", color: "#00ff80" },
      discord: "https://discord.gg/sMFSe3zuPY",
      image: "https://cdn.discordapp.com/attachments/1409221127993032854/1409222683840872598/Aera.png?ex=68ac9865&is=68ab46e5&hm=70b293069add9e43725921c1d0f470d7f99c2e9c9ee0eecb4fa0b677f200db3c&",
      images: [
        "https://images2.minutemediacdn.com/image/upload/c_crop,w_1280,h_720,x_0,y_0/c_fill,w_620,ar_16:9,f_auto,q_auto,g_auto/images/voltaxMediaLibrary/mmsport/esports_illustrated/01jeefxncm45ckq4m8pe.jpg"
      ]
    },
    {
      title: "Nado's Hosting",
      description: "",
      discord: "",
      image: "",
      bubble: {text: "InActive", color: "#ff0000"}
    },
    {
      title: "Aeris",
      description: "Aeris is an OGFN emulator that hosts the best season, Chapter 2 Season 8, Will we see you on the Aeris Battle Bus?",
      discord: "discord.gg/aerisfn",
      bubble: { text: "Verified", color: "#00ff80" },
      image: "https://cdn.discordapp.com/attachments/1405399419813232650/1409242464170147983/1000085881-removebg-preview.png?ex=68acaad1&is=68ab5951&hm=c20122c7c8be0a02be43b6c6c5b579c63a3dd55b56053d893a74324cd47ab45c&"
    },
    {
      title: "BeyondMP",
      description: "Beyond Chapter 2 Season 2",
      discord: "https://discord.gg/Cmjx4Epp",
      image: "https://cdn.discordapp.com/attachments/1394013830127812698/1409231876098359497/IMG_6942.png?ex=68aca0f5&is=68ab4f75&hm=90bd9c163854b36ada1667440d0a60e793a5eb7b98a3f39816cd609a7441878f&",
      bubble: { text: "Verified", color: "#00ff80" } 
    },
    {
      title: "Mercury",
      description: "Fortnite STW Mod",
      discord: "https://discord.gg/pEwDG9Wj",
      bubble: { text: "Verified", color: "#00ff80" },
      image: "https://cdn.discordapp.com/attachments/1409100263377207306/1409367038987735070/image.png?ex=68ad1ed6&is=68abcd56&hm=6063126d8e8cf6b8e251cf48d723437d8951ce78f83948bf00e48a035cc44b7b&"
    },
    {
      title: "FortMP",
      description: "OG Fortnite server looking to bring back the original game from Chapter 2 Season 7!",
      discord: "https://discord.gg/X3myHSzjsV",
      image: "https://cdn.discordapp.com/attachments/1409348976406167693/1409378362337525770/Screenshot_2025-08-24_at_11.26.05_PM.png?ex=68ad2962&is=68abd7e2&hm=7b83c38e70dab956b8c6633d6321e0f9de6e4271debb5cce96fc111d0ee08462&",
      bubble: { text: "Verified", color: "#00ff80" }
    },
    {
      title: "Nexa",
      description: "Replay Chapter 2 Fortnite with friends and create new memories with Nexa!",
      discord: "https://discord.gg/RVmuAb5FSg",
      bubble: { text: "Verified", color: "#00ff80" },
      image: "https://cdn.discordapp.com/attachments/1409373497351995514/1409375166689181787/nexa.png?ex=68ad2668&is=68abd4e8&hm=018a1296e9bda1322d781c82142014bcddf6e84970345a371dee2a7346e420aa&",
      images: [
        "https://cdn2.unrealengine.com/Fortnite%2Fblog%2Ffortnite-chapter-2-update-whats-new%2F11BR_Launch_News_PatchNotes_Header_v2-1920x1080-b2f19d835444e7e3923974ca9a60f13f261bc91f.jpg"
      ]
    },
    {
      title: "Lunar",
      description: "An OG Fortnite server, that currently host the version 15.30 in EU and NA 24/7!",
      discord: "https://discord.gg/qnerZD2k2B",
      image: "https://cdn.discordapp.com/attachments/1394080230414745620/1409327973907173537/LuxorNrgrgewLogoV1.png?ex=68acfa75&is=68aba8f5&hm=62277c72ac2f10e2a1c4bea3c6d9a04d14ae8211e65fcc6fcc61279470da0eeb&",
      bubble: { text: "Verified", color: "#00ff80" }
    },
    {
      title: "Apollo",
      description: "Relieve Chapter 2 Season 1 Fortnite again using ApolloMP!",
      discord: "https://discord.gg/FbJcQvQ3",
      bubble: { text: "Verified", color: "#00ff80" },
      image: "https://cdn.discordapp.com/attachments/1405428025373233232/1409215324263547102/377e07c877e33a411846ece2c73cb9d9-1.png?ex=68ac918b&is=68ab400b&hm=63a18deab3a22d022ab854005982f72fd9cfa77d68426b635803cc5f75d82725&",
      images: [
        "https://cdn.mos.cms.futurecdn.net/TNHyeyqTofRfpqVFMzb8QS.jpg"
    ]
    }
    // Add more 'projects' category projects here
  ],
  backend: [
    {
      title: "Lawin Server V1",
      description: "Fortnite backend, made by Lawin.",
      repo: "https://github.com/Lawin0129/LawinServer",
      image: "https://placehold.co/64x64/9333ea/fff?text=V1",
    },
    {
      title: "Lawin Server V2",
      description: "LawinServer V2 is a fortnite backend written in Node.js that features an account system and xmpp.",
      repo: "https://github.com/Lawin0129/LawinServerV2",
      image: "https://placehold.co/64x64/6d28d9/fff?text=V2"
      // No images for this
    },
    {
      title: "FortServer",
      description: "Universal Fortnite Private Server",
      discord: "",
      repo: "https://github.com/zinx28/FortServer",
      image: "https://avatars.githubusercontent.com/u/63958372?v=4"
    },
    {
      title: "Reload Backend",
      description: "Created by Burlone, This is a modded backend, all main backend credits to Lawin",
      discord: "",
      repo: "https://github.com/Project-Reload/Reload-Backend",
      image: "https://avatars.githubusercontent.com/u/176188285?s=200&v=4"
    },
    {
      title: "Dynamite Core",
      description: "Dynamite Core - The free open-source Fortnite private server",
      discord: "",
      repo: "https://github.com/Trail-Blaze/dynamite-core",
      image: "https://avatars.githubusercontent.com/u/79590596?s=200&v=4"
    },
    {
      title: "Neonite V2",
      description: "Neonite V2 - An open-source Fortnite lobby emulator, written in JavaScript.",
      discord: "",
      repo: "https://github.com/NeoniteDev/NeoniteV2",
      image: "https://avatars.githubusercontent.com/u/73992213?s=200&v=4"
    }
    // Add more backend projects here
  ],
  launcher: [
    // Add launcher projects here
  ],
  sdk: [
    // Add SDK projects here
  ],
  tools: [
    // Add tools projects here
  ],
  builds: 
  [
    {
      title: "Fortnite 1.8",
      downloadLink: "https://builds.rebootfn.org/1.8.rar",
      image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_FrC0_lOL3H62-j9uuUR1cvSvZpRvUW3DPJRdbyakbK2aJDm6jdfN0l9gqLGmTtmeOQk&usqp=CAU",
      images: [
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdtwlmv8Pb2zEPG6PCiyBEW2hLWQ4LghC4IA&s",
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQRovs4-9xBGPSpYora3Yo-N3JILUPxKpQ7g&s"
      ]
    },
    {
      title: "Fortnite 1.10",
      downloadLink: "https://builds.rebootfn.org/1.10.rar",
      image: "https://static.wikia.nocookie.net/logopedia/images/2/20/Fortnite_Chapter_1_Season_1_V2.jpg/revision/latest/scale-to-width-down/250?cb=20230826201037",
      images: [
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdtwlmv8Pb2zEPG6PCiyBEW2hLWQ4LghC4IA&s",
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQRovs4-9xBGPSpYora3Yo-N3JILUPxKpQ7g&s"
      ]
    },
    {
      title: "Fortnite 2.4.2",
      downloadLink: "https://builds.rebootfn.org/2.4.2.zip",
      image: "https://static.wikia.nocookie.net/logopedia/images/2/20/Fortnite_Chapter_1_Season_1_V2.jpg/revision/latest/scale-to-width-down/250?cb=20230826201037",
      images: [
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdtwlmv8Pb2zEPG6PCiyBEW2hLWQ4LghC4IA&s",
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQRovs4-9xBGPSpYora3Yo-N3JILUPxKpQ7g&s"
      ]
    },
    {
      title: "Fortnite 3.5 (Rocket)",
      downloadLink: "https://builds.rebootfn.org/3.5.rar",
      image: "https://static.wikia.nocookie.net/logopedia/images/2/20/Fortnite_Chapter_1_Season_1_V2.jpg/revision/latest/scale-to-width-down/250?cb=20230826201037",
      images: [
        "https://esportsinsider.com/wp-content/uploads/2025/07/Fortnite-Rift-large.jpg"
      ]
    },
    {
      title: "Fortnite 4.2",
      downloadLink: "https://builds.rebootfn.org/4.2.zip",
      image: "https://static.wikia.nocookie.net/logopedia/images/2/20/Fortnite_Chapter_1_Season_1_V2.jpg/revision/latest/scale-to-width-down/250?cb=20230826201037"
    },
    {
      title: "Fortnite 4.5",
      downloadLink: "https://builds.rebootfn.org/4.5.rar",
      image: "https://static.wikia.nocookie.net/logopedia/images/2/20/Fortnite_Chapter_1_Season_1_V2.jpg/revision/latest/scale-to-width-down/250?cb=20230826201037"
    },
    {
      title: "Fortnite 5.21",
      downloadLink: "https://builds.rebootfn.org/5.21.rar",
      image: "https://static.wikia.nocookie.net/logopedia/images/d/db/Fortnite_S1.svg/revision/latest/scale-to-width-down/250?cb=20210330161743"
    },
    {
      title: "Fortnite 5.41",
      downloadLink: "http://builds.eclipsemp.org/5.41.zip",
      image: "https://static.wikia.nocookie.net/logopedia/images/d/db/Fortnite_S1.svg/revision/latest/scale-to-width-down/250?cb=20210330161743"
    },
    {
      title: "Fortnite 6.00",
      downloadLink: "http://builds.eclipsemp.org/5.41.zip",
      image: "https://static.wikia.nocookie.net/logopedia/images/d/db/Fortnite_S1.svg/revision/latest/scale-to-width-down/250?cb=20210330161743"
    },
    {
      title: "Fortnite 6.30",
      downloadLink: "http://builds.eclipsemp.org/5.41.zip",
      image: "https://static.wikia.nocookie.net/logopedia/images/d/db/Fortnite_S1.svg/revision/latest/scale-to-width-down/250?cb=20210330161743"
    },
    {
      title: "Fortnite 7.10",
      downloadLink: "https://builds.rebootfn.org/7.10.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 7.30",
      downloadLink: "https://builds.rebootfn.org/7.30.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 7.40",
      downloadLink: "https://builds.rebootfn.org/7.40.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 8.00",
      downloadLink: "https://builds.rebootfn.org/8.00.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 8.20",
      downloadLink: "https://builds.rebootfn.org/8.20.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 8.51",
      downloadLink: "https://builds.rebootfn.org/8.51.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 9.00",
      downloadLink: "https://builds.rebootfn.org/9.00.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 9.10",
      downloadLink: "https://builds.rebootfn.org/9.10.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 9.21",
      downloadLink: "https://builds.rebootfn.org/9.21.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 9.41",
      downloadLink: "https://builds.rebootfn.org/9.41.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"       
    },
    {
      title: "Fortnite 10.00",
      downloadLink: "https://cdn.solarisfn.org/10.00.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 10.20",
      downloadLink: "https://public.simplyblk.xyz/10.20.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 10.30",
      downloadLink: "https://download.fn-archive.com/FortniteClient-10.30-CL-8569414.rar",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 11.00",
      downloadLink: "https://builds.fn-builds.net/11.00.7z",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 11.11",
      downloadLink: "https://download.fn-archive.com/FortniteClient-11.11-CL-10082788.7z",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 12.41",
      downloadLink: "https://cdn.cbn.lol/12.41",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 12.61",
      downloadLink: "https://saturn.nxa.app/12.61.zip",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 13.00",
      downloadLink: "https://builds.fn-builds.net/13.00.7z",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 13.40",
      downloadLink: "https://builds.fn-builds.net/13.40-CL-14113327.7z",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    },
    {
      title: "Fortnite 14.00",
      downloadLink: "https://builds.fn-builds.net/14.00.7z",
      image: "https://cdn2.steamgriddb.com/icon_thumb/ffba7a186e5c46af6567af2e456fc1a0.png"
    }
  ]
};

const tabs = [
  { id: "announcements", label: "Announcements" },
  { id: "projectz", label: "Projects" },
  { id: "dll", label: "DLL" },
  { id: "backend", label: "Backend" },
  { id: "launcher", label: "Launcher" },
  { id: "sdk", label: "SDK" },
  { id: "builds", label: "Builds" },
  { id: "tools", label: "Tools" }
  // Settings tab will be rendered separately at the bottom
];

/* Hook for page-level cursor-follow glow */
function usePageGlow() {
  useEffect(() => {
    const overlay = document.querySelector('.page-glow-overlay');
    if (!overlay) return;
    const onMove = (e) => {
      const x = (e.clientX / window.innerWidth) * 100;
      const y = (e.clientY / window.innerHeight) * 100;
      overlay.style.setProperty('--x', x + '%');
      overlay.style.setProperty('--y', y + '%');
    };
    window.addEventListener('mousemove', onMove);
    return () => window.removeEventListener('mousemove', onMove);
  }, []);
}

/* Components */
// Map tab id to example icon URL (replace with real images later)
const tabIcons = {
  announcements: "https://img.icons8.com/pastel-glyph/64/FFFFFF/bullhorn-megaphone--v2.png",
  dll: "https://img.icons8.com/ios-filled/50/FFFFFF/dll.png",
  backend: "https://img.icons8.com/ios-filled/100/FFFFFF/code.png",
  launcher: "https://img.icons8.com/ios-filled/100/FFFFFF/missile.png",
  sdk: "https://img.icons8.com/external-tal-revivo-light-tal-revivo/96/FFFFFF/external-skd-badge-logotype-isolated-on-white-background-development-light-tal-revivo.png",
  tools: "https://img.icons8.com/ios-filled/100/FFFFFF/maintenance.png",
  projects: "https://img.icons8.com/ios-filled/100/FFFFFF/ms-project.png",
  settings: "https://img.icons8.com/ios-filled/50/FFFFFF/settings.png"
};

function SettingsPanel({ setTheme, currentTheme }) {
  const themes = [
    { name: "Black & Blue", gradient: "blue", colors: { from: "#2563eb", to: "#60a5fa", hover: "#3b82f6" } },
    { name: "Black & Red", gradient: "red", colors: { from: "#dc2626", to: "#f87171", hover: "#ef4444" } },
    { name: "Black & Purple", gradient: "purple", colors: { from: "#9333ea", to: "#a78bfa", hover: "#a21caf" } },
    { name: "EpicGames", gradient: "epic", colors: { button: "#0078ff", panel: "#1a1a1a", cardBorder: "#0078ff" } }
  ];
  return (
    e('div', { className: "flex flex-col items-center space-y-4 p-4" },
      e('h2', { className: "text-xl font-bold text-white mb-4" }, "Select Theme"),
      themes.map(theme =>
        e('button', {
          key: theme.name,
          onClick: () => setTheme(theme.gradient),
          className:
            "w-full py-2 px-4 rounded-lg bg-gray-800 text-white transition-colors" +
            (currentTheme === theme.gradient ? " ring-2 ring-offset-2 ring-white" : ""),
          style: currentTheme === theme.gradient
            ? (
                theme.gradient === "epic"
                  ? { background: theme.colors.button, color: "#fff" }
                  : { background: `linear-gradient(90deg, ${theme.colors.from}, ${theme.colors.to})`, color: "#fff" }
              )
            : theme.gradient === "epic"
              ? { background: "#23272e", color: "#fff" }
              : undefined
        }, theme.name)
      )
    )
  );
}

// Removed useSidebarGlow and sidebar partial glow logic

function Sidebar({ activeTab, setActiveTab }) {
  const [activeIndex, setActiveIndex] = useState(null);
  // Get themeVars from window, fallback to blue if not present
  const themeVars = window._themeVars || {
    button: "#3b82f6",
    panel: "#1a1a1a",
    cardBorder: "#3b82f6"
  };
  // For refs to sidebar buttons for border manipulation
  const btnRefs = React.useRef([]);
  return e('aside', {
      className: "w-60 bg-black/80 relative flex flex-col p-4",
      style: { background: themeVars.panel }
    },
    e('h1', { className: "text-xl font-bold mb-8 text-white z-10 relative" }, "Project Hub"),
    e('nav', { className: "space-y-3 z-10 relative" },
      tabs.map((tab, index) => {
        return e('button', {
          key: tab.id,
          ref: el => btnRefs.current[index] = el,
          className:
            [
              "w-full",
              "text-left",
              "p-3",
              "rounded-lg",
              "relative",
              "group",
              "bg-transparent",
              "flex",
              "items-center",
              "outline-glow"
            ].filter(Boolean).join(" "),
          onClick: ()=>setActiveTab(tab.id),
          onMouseEnter: (event) => {
            setActiveIndex(index);
            if (btnRefs.current[index])
              btnRefs.current[index].style.border = `2px solid ${themeVars.cardBorder}`;
          },
          onMouseLeave: (event) => {
            setActiveIndex(null);
            if (activeTab !== tab.id && btnRefs.current[index])
              btnRefs.current[index].style.border = "2px solid transparent";
          },
          style: activeTab === tab.id
            ? { backgroundColor: themeVars.button, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
            : { backgroundColor: "transparent", color: "#fff", border: "2px solid transparent", transition: "border 0.3s ease" }
        },
          e('img', {
            src: tabIcons[tab.id] || "https://placehold.co/20x20",
            alt: "",
            className: "sidebar-icon-img"
          }),
          e('span', { className:"relative z-10 text-white" }, tab.label)
        )
      })
    ),
    // Settings tab at the bottom of sidebar
    e('div', { className: "mt-auto flex flex-col z-10 relative" },
      (() => {
        // Use a ref for the settings button
        const settingsRef = React.useRef(null);
        return e('button', {
          ref: settingsRef,
          className:
            [
              "w-full",
              "text-left",
              "p-3",
              "rounded-lg",
              "relative",
              "group",
              "bg-transparent",
              "flex",
              "items-center",
              "outline-glow"
            ].filter(Boolean).join(" "),
          onClick: () => setActiveTab("settings"),
          onMouseEnter: (event) => {
            setActiveIndex("settings");
            if (settingsRef.current)
              settingsRef.current.style.border = `2px solid ${themeVars.cardBorder}`;
          },
          onMouseLeave: (event) => {
            setActiveIndex(null);
            if (activeTab !== "settings" && settingsRef.current)
              settingsRef.current.style.border = "2px solid transparent";
          },
          style: activeTab === "settings"
            ? { backgroundColor: themeVars.button, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
            : { backgroundColor: "transparent", color: "#fff", border: "2px solid transparent", transition: "border 0.3s ease" }
        },
          e('img', {
            src: tabIcons.settings,
            alt: "",
            className: "sidebar-icon-img"
          }),
          e('span', { className: "relative z-10 text-white" }, "Settings")
        );
      })()
    ),
    e('div', { className: "sidebar-right-glow" })
  );
}

const announcementsData = [
  {
    image: "https://pbs.twimg.com/media/GU-4R2BXYAAq07y.jpg:large",
    title: "Updates",
    text: "Downloadable Fortnite builds, More DLL's, More backends."
  },
  {
    image: "https://pbs.twimg.com/media/GtXJVBWbMAMiFlV.jpg:large",
    title: "Ack",
    text: "Our content is limited for now, we are working very hard to get as much as possible."
  },
  {
    image: "https://www.therisingnews.com/wp-content/uploads/2024/03/GILT9hCWAAA-EtR.jpeg",
    title: "Reminder",
    text: "If you'd like to add a project please add me on discord @opensync"
  }
];

function Announcement() {
  const [currentIndex, setCurrentIndex] = useState(0);
  const total = announcementsData.length;
  const [active, setActive] = useState(false);
  const ref = useRef(null);

  const prev = () => {
    setCurrentIndex((currentIndex - 1 + total) % total);
  };

  const next = () => {
    setCurrentIndex((currentIndex + 1) % total);
  };

  const current = announcementsData[currentIndex];

  const handleMouseMove = (event) => {
    if (!ref.current) return;
    const rect = ref.current.getBoundingClientRect();
    const x = event.clientX;
    const y = event.clientY;
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const dist = Math.hypot(centerX - x, centerY - y);
    if (dist <= 100) {
      if (!active) setActive(true);
      // Update CSS variables for gradient position
      const relX = x - rect.left;
      const relY = y - rect.top;
      ref.current.style.setProperty('--x', relX + 'px');
      ref.current.style.setProperty('--y', relY + 'px');
    } else {
      if (active) setActive(false);
    }
  };

  return e('div', {
    ref,
    className: `w-full h-full flex justify-center items-center relative outline-glow${active ? ' active' : ''}`,
    onMouseMove: handleMouseMove,
    onMouseLeave: () => setActive(false),
    onMouseEnter: () => setActive(true)
  },
    e('div', { className: "relative max-w-4xl flex flex-col justify-center items-center space-y-6 w-full h-full px-6" },
      e('img', { src: current.image, alt: current.title, className: "rounded-xl mx-auto max-w-full max-h-[60vh] object-contain" }),
      e('h2', { className: "text-4xl font-bold text-white" }, current.title),
      e('p', { className: "text-white text-lg max-w-3xl" }, current.text),
      e('div', { className: "absolute top-1/2 left-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: prev, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') prev(); } },
        e('span', { className: "text-white" }, "‹")
      ),
      e('div', { className: "absolute top-1/2 right-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: next, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') next(); } },
        e('span', { className: "text-white" }, "›")
      ),
      e('div', { className: "flex justify-center space-x-2 mt-6" },
        announcementsData.map((_, idx) =>
          e('span', {
            key: idx,
            className: `w-3 h-3 rounded-full cursor-pointer ${idx === currentIndex ? 'bg-blue-400' : 'bg-blue-900'} text-white`,
            onClick: () => setCurrentIndex(idx),
            role: "button",
            tabIndex: 0,
            onKeyDown: (e) => { if(e.key === 'Enter') setCurrentIndex(idx); }
          })
        )
      )
    )
  );
}

function ProjectCard({ title, description, repo, discord, image, onClick }) {
  const [active, setActive] = useState(false);
  const [expanded, setExpanded] = useState(false); // Track expansion
  const ref = useRef(null);

  const handleMouseMove = (event) => {
    if (!ref.current) return;
    const rect = ref.current.getBoundingClientRect();
    const x = event.clientX;
    const y = event.clientY;
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const dist = Math.hypot(centerX - x, centerY - y);
    if (dist <= 100) {
      if (!active) setActive(true);
    } else {
      if (active) setActive(false);
    }
  };

  // Collapse if description is longer than 20 chars
  const showReadMore = description && description.length > 20;
  // Only show first 20 chars + ... when collapsed
  const collapsedDesc = description ? description.slice(0, 20) + "..." : "";

  // Animate height for expand/collapse and allow layout to reflow
  const cardStyle = {
    transition: "min-height 0.2s, box-shadow 0.2s",
    minHeight: expanded ? "8.5em" : "6.5em",
    cursor: onClick ? "pointer" : undefined
  };

  return 
('div', {
    ref,
    className: `w-[200px] bg-transparent rounded-2xl shadow-xl p-8 text-center relative outline-glow group flex flex-col justify-center items-center transition-all duration-200${active ? ' active' : ''}`,
    style: cardStyle,
    onMouseEnter: () => setActive(true),
    onMouseLeave: () => setActive(false),
    onMouseMove: handleMouseMove,
    onClick: onClick
  },
    image && e('img', {
      src: image,
      alt: title + " logo",
      className: "w-16 h-16 mx-auto rounded mb-2 object-cover"
    }),
    e('h3', { className:"text-2xl font-bold mb-4 text-white" }, title),
    e('p', {
      className:"text-white mb-4 transition-all duration-200",
      style: expanded || !showReadMore
        ? {}
        : { overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis', minHeight: '1.75em' }
    },
      expanded || !showReadMore ? description : collapsedDesc
    ),
    showReadMore &&
  e('button', {
    onClick: (event) => { event.stopPropagation(); setExpanded(!expanded); },
    className: "text-sm mt-2 hover:underline",
    style: {
      background: "transparent",
      padding: 0,
      color: "#fff"
    }
  }, expanded ? "Read Less" : "Read More"),
    e('div', { className:"flex justify-center space-x-2 mt-2" },
      repo && e('a', {
        href:repo,
        target:"_blank",
        rel:"noopener noreferrer",
        className:"flex items-center space-x-2 hover:text-blue-400",
        onClick: (event) => event.stopPropagation()
      },
        e('img', {
          src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg",
          alt: "GitHub",
          style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
          className: "inline-block"
        })
      ),
      discord && e('a', {
        href:discord,
        target:"_blank",
        rel:"noopener noreferrer",
        className:"flex items-center space-x-2 hover:text-blue-400",
        onClick: (event) => event.stopPropagation()
      },
        e('img', {
          src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/discord.svg",
          alt: "Discord",
          style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
          className: "inline-block"
        })
      ),
      
    )
  );
}

function ProjectGrid({ projects, onProjectClick }) {
  // Align cards to start right next to sidebar and flow left to right, with tight gap,
  // wrap to next line as needed, and cards close together.
  return e('div', {
    className: "flex flex-wrap justify-start gap-2"
  },
    projects.map((p, i) =>
      e(ProjectCard, {
        ...p,
        key: i,
        onClick: onProjectClick ? (() => onProjectClick(p)) : undefined
      })
    )
  );
}

// Helper function to fetch Discord member count
async function fetchDiscordMemberCount({ discord, guildId }) {
  try {
    let url = null;
    if (guildId) {
      url = `https://discord.com/api/guilds/${guildId}/widget.json`;
    } else if (discord) {
      const inviteCode = discord.split("discord.gg/")[1];
      if (inviteCode) {
        url = `https://discord.com/api/v9/invites/${inviteCode}?with_counts=true&with_expiration=true`;
      }
    }
    if (!url) return { count: null };
    const res = await fetch(url);
    if (!res.ok) throw new Error("Failed to fetch");
    const data = await res.json();
    if (data.approximate_member_count) return { count: data.approximate_member_count };
    if (data.presence_count) return { count: data.presence_count };
    if (Array.isArray(data.members)) return { count: data.members.length };
    return { count: null };
  } catch (err) {
    console.error("Discord count error:", err);
    return { count: null };
  }
}

// Helper function to fetch GitHub repo stats
async function fetchGitHubRepoStats(repoUrl) {
  try {
    if (!repoUrl) return { stars: null, forks: null, contributors: null };

    const match = repoUrl.match(/github\.com\/([^/]+)\/([^/]+)/);
    if (!match) return { stars: null, forks: null, contributors: null };

    const owner = match[1];
    const repo = match[2];

    const repoRes = await fetch(`https://api.github.com/repos/${owner}/${repo}`);
    if (!repoRes.ok) throw new Error("Failed repo fetch");
    const repoData = await repoRes.json();

    const contribRes = await fetch(`https://api.github.com/repos/${owner}/${repo}/contributors?per_page=1&anon=true`);
    let contribCount = null;
    if (contribRes.ok) {
      const contribLink = contribRes.headers.get("Link");
      if (contribLink && contribLink.includes('rel="last"')) {
        const lastPageMatch = contribLink.match(/&page=(\d+)>; rel="last"/);
        if (lastPageMatch) contribCount = parseInt(lastPageMatch[1]);
      } else {
        const contribData = await contribRes.json();
        contribCount = contribData.length;
      }
    }

    return {
      stars: repoData.stargazers_count ?? null,
      forks: repoData.forks_count ?? null,
      contributors: contribCount
    };
  } catch (err) {
    console.error("GitHub API error:", err);
    return { stars: null, forks: null, contributors: null };
  }
}

// Helper: get Prism language class from filename
function getLanguage(fileName) {
  if (!fileName) return "language-none";
  const ext = fileName.split('.').pop().toLowerCase();
  if (ext === "js") return "language-javascript";
  if (ext === "jsx") return "language-javascript";
  if (ext === "ts") return "language-typescript";
  if (ext === "tsx") return "language-typescript";
  if (ext === "py") return "language-python";
  if (["cpp", "cc", "cxx", "hpp", "h", "c"].includes(ext)) return "language-cpp";
  if (ext === "html" || ext === "htm") return "language-html";
  if (ext === "css" || ext === "scss" || ext === "sass" || ext === "less") return "language-css";
  if (ext === "json") return "language-json";
  if (ext === "md") return "language-markdown";
  if (ext === "sh" || ext === "bash" || ext === "zsh") return "language-bash";
  if (ext === "xml") return "language-markup";
  if (ext === "yml" || ext === "yaml") return "language-yaml";
  return "language-none";
}

// Side panel for project details with IDE/folder navigation
function ProjectSidePanel({ project, onClose }) {
  const { useState, useEffect, useRef } = React;
  const [visible, setVisible] = useState(false);
  const [shouldRender, setShouldRender] = useState(true);

  // discord count state
  const [memberCount, setMemberCount] = useState(null);
  const [loadingCount, setLoadingCount] = useState(false);
  const [countError, setCountError] = useState(null);

  // GitHub stats state
  const [githubStats, setGithubStats] = useState({ stars: null, forks: null, contributors: null });
  const [loadingGitHub, setLoadingGitHub] = useState(false);

  const panelRef = useRef(null);

  // Lightbox state for images
  const [lightboxImage, setLightboxImage] = useState(null);

  // IDE overlay state (full screen)
  const [showIDEFull, setShowIDEFull] = React.useState(false);
  const [files, setFiles] = React.useState([]);
  const [selectedFile, setSelectedFile] = React.useState(null);
  const [fileContent, setFileContent] = React.useState("");
  const [currentPath, setCurrentPath] = React.useState("");
  const [pathStack, setPathStack] = React.useState([]);

  // Helper: fetch repo files (with path)
  async function fetchRepoFiles(repoUrl, path = "") {
    try {
      const parts = repoUrl.split("/");
      const owner = parts[parts.length - 2];
      const repo = parts[parts.length - 1];
      const url = path
        ? `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}`
        : `https://api.github.com/repos/${owner}/${repo}/contents`;
      const res = await fetch(url);
      const data = await res.json();
      setFiles(Array.isArray(data) ? data : []);
      setCurrentPath(path);
      setSelectedFile(null);
      setFileContent("");
    } catch (err) {
      console.error("Error fetching repo files:", err);
      setFiles([]);
    }
  }
  // Helper: fetch file content
  async function fetchFileContent(file) {
    try {
      const res = await fetch(file.download_url);
      const text = await res.text();
      setFileContent(text);
      setSelectedFile(file);
      if (window.Prism) {
        setTimeout(() => Prism.highlightAll(), 0);
      }
    } catch (err) {
      console.error("Error fetching file:", err);
    }
  }

  // Animate in on mount
  useEffect(() => {
    setTimeout(() => setVisible(true), 10);
  }, []);

  // Load discord count whenever the selected project changes
  useEffect(() => {
    let cancelled = false;
    async function load() {
      if (!project) return;
      if (!project.discord && !project.guildId && !project.discordMemberCount) {
        setMemberCount(null); return;
      }
      setLoadingCount(true);
      setCountError(null);
      try {
        const { count } = await fetchDiscordMemberCount({
          discord: project.discord,
          guildId: project.guildId
        });
        if (!cancelled) {
          if (typeof count === 'number') {
            setMemberCount(count);
          } else if (typeof project.discordMemberCount === 'number') {
            // fallback to static if provided
            setMemberCount(project.discordMemberCount);
          } else {
            setMemberCount(null);
          }
        }
      } catch (e) {
        if (!cancelled) setCountError('Unavailable');
      } finally {
        if (!cancelled) setLoadingCount(false);
      }
    }
    load();
    return () => { cancelled = true; };
  }, [project]);

  // Load GitHub stats whenever the selected project changes
  useEffect(() => {
    let cancelled = false;
    async function loadGitHub() {
      if (!project.repo) return;
      setLoadingGitHub(true);
      const stats = await fetchGitHubRepoStats(project.repo);
      if (!cancelled) setGithubStats(stats);
      setLoadingGitHub(false);
    }
    loadGitHub();
    return () => { cancelled = true; };
  }, [project]);

  // When opening code, open full IDE overlay and load files
  function handleOpenCode() {
    setShowIDEFull(true);
    setCurrentPath("");
    setPathStack([]);
    fetchRepoFiles(project.repo, "");
  }

  // Breadcrumb segments for currentPath
  function getBreadcrumbSegments(path) {
    if (!path) return [];
    const segments = path.split("/").filter(Boolean);
    let acc = "";
    return segments.map((seg, idx) => {
      acc += (idx === 0 ? "" : "/") + seg;
      return { name: seg, path: acc };
    });
  }

  // Breadcrumb click: go to that path (pop stack)
  function handleBreadcrumbClick(idx, segments) {
    const seg = segments[idx];
    // New pathStack: up to idx
    setPathStack(segments.slice(0, idx + 1).map(s => s.path));
    fetchRepoFiles(project.repo, seg.path);
  }

  // Folder click: push to stack
  function handleDirClick(file) {
    setPathStack([...pathStack, file.path]);
    fetchRepoFiles(project.repo, file.path);
  }

  // Up one folder
  function handleUpOne() {
    if (!currentPath) return;
    const segs = currentPath.split("/").filter(Boolean);
    if (segs.length === 0) return;
    const upPath = segs.slice(0, -1).join("/");
    setPathStack(pathStack.slice(0, -1));
    fetchRepoFiles(project.repo, upPath);
  }

  const handleClose = () => {
    setVisible(false);
    setTimeout(() => {
      setShouldRender(false);
      onClose && onClose();
    }, 300);
  };

  if (!shouldRender) return null;

  // Breadcrumb segments
  const breadcrumbSegments = getBreadcrumbSegments(currentPath);

  // For overlay IDE: close button style like left panel, background like left panel, etc.
  const themeVars = window._themeVars || {
    button: "#3b82f6",
    panel: "#1a1a1a",
    cardBorder: "#3b82f6"
  };

  return React.createElement(
    React.Fragment,
    null,
    React.createElement('div', {
      ref: panelRef,
      className:
        "fixed top-0 right-0 h-full w-96 bg-transparent p-6 flex flex-col z-50 backdrop-blur-sm transition-transform duration-300 ease-in-out overflow-y-auto",
      style: {
        boxShadow: "0 0 60px 0 rgba(59,130,246,0.12)",
        transform: visible ? "translateX(0)" : "translateX(100%)"
      }
    },
      React.createElement('div', { className: "relative flex flex-col flex-1" },
        // Close
        React.createElement('button', {
          onClick: handleClose,
          className: "absolute top-2 right-2 text-white bg-black/40 rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-700/60 outline-glow z-10"
        }, React.createElement('span', { className: "text-2xl font-bold" }, "×")),
        // Content card
        React.createElement('div', { className: "flex flex-col items-center outline-glow active rounded-xl p-4 mt-6 bg-black/30 relative" },
          project.logo || project.image
            ? React.createElement('img', {
                src: project.logo || project.image,
                alt: project.title + " logo",
                className: "w-20 h-20 rounded-xl mb-4 object-cover shadow-lg"
              })
            : null,
          React.createElement('h2', { className: "text-2xl font-bold mb-2 text-white text-center" }, project.title),
          React.createElement('p', { className: "mb-4 text-white text-center" }, project.description),
          // Images grid if present
          project.images && project.images.length > 0 &&
            React.createElement('div', { className: "grid grid-cols-1 gap-4 w-full mt-4" },
              project.images.map((img, i) =>
                React.createElement('img', {
                  key: i,
                  src: img,
                  alt: project.title + " screenshot " + (i+1),
                  className: "rounded-xl object-cover shadow-lg cursor-pointer",
                  onClick: () => setLightboxImage(img)
                })
              )
            ),
          React.createElement('div', { className: "flex gap-3 mb-4" },
            project.repo && React.createElement('a', {
              href: project.repo, target: "_blank", rel: "noopener noreferrer", className: "hover:text-blue-400"
            }, React.createElement('img', {
              src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg",
              alt: "GitHub", style: { width: 24, height: 24, filter: "invert(1)" }
            })),
            project.discord && React.createElement('a', {
              href: project.discord, target: "_blank", rel: "noopener noreferrer", className: "hover:text-blue-400"
            }, React.createElement('img', {
              src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/discord.svg",
              alt: "Discord", style: { width: 24, height: 24, filter: "invert(1)" }
            }))
          ),
          // View Code Button
          project.repo && (
            React.createElement('button', {
              className: "bg-blue-600 text-white px-3 py-2 mt-4 rounded-xl text-base md:px-2 md:py-1 md:text-sm outline-glow",
              style: {
                backgroundColor: themeVars.button,
                border: `2px solid transparent`,
                transition: "border 0.3s, background 0.3s"
              },
              onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
              onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; },
              onClick: handleOpenCode
            }, "View Code")
          )
        ),
        // GitHub Stats card
        (project.repo && (
          React.createElement('div', { className: "outline-glow active bg-black/30 rounded-xl p-4 mt-4 w-full text-center" },
            React.createElement('h3', { className: "text-lg font-bold text-white mb-2" }, "GitHub Stats"),
            React.createElement('p', { className: "text-white" }, loadingGitHub ? "Loading…" : `⭐ Stars: ${githubStats.stars ?? "Unknown"}`),
            React.createElement('p', { className: "text-white" }, loadingGitHub ? "" : `🍴 Forks: ${githubStats.forks ?? "Unknown"}`),
            React.createElement('p', { className: "text-white" }, loadingGitHub ? "" : `👥 Contributors: ${githubStats.contributors ?? "Unknown"}`),
            React.createElement('button', {
              onClick: async () => {
                setLoadingGitHub(true);
                const stats = await fetchGitHubRepoStats(project.repo);
                setGithubStats(stats);
                setLoadingGitHub(false);
              },
              className: "mt-3 px-3 py-2 md:px-2 md:py-1 rounded-xl bg-black/40 hover:bg-black/60 text-white text-base md:text-sm outline-glow",
              style: { border: "2px solid transparent", transition: "border 0.3s" },
              onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
              onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; }
            }, "Refresh")
          )
        )),
        // Discord Members card (separate)
        (project.discord || project.guildId || typeof project.discordMemberCount === 'number') &&
          React.createElement('div', { className: "outline-glow active bg-black/30 rounded-xl p-4 mt-4 w-full text-center" },
            React.createElement('h3', { className: "text-lg font-bold text-white mb-1" }, "Discord Members"),
            loadingCount
              ? React.createElement('p', { className: "text-white/80" }, "Loading…")
              : (countError
                  ? React.createElement('p', { className: "text-white/70" }, "Unavailable")
                  : React.createElement('p', { className: "text-white text-xl" }, memberCount ?? "Unknown")
                ),
            React.createElement('button', {
              onClick: async () => {
                // manual refresh
                setLoadingCount(true);
                const { count } = await fetchDiscordMemberCount({
                  discord: project.discord,
                  guildId: project.guildId
                });
                setMemberCount(typeof count === 'number' ? count : (project.discordMemberCount ?? null));
                setLoadingCount(false);
              },
              className: "mt-3 px-3 py-2 md:px-2 md:py-1 rounded-xl bg-black/40 hover:bg-black/60 text-white text-base md:text-sm outline-glow",
              style: { border: "2px solid transparent", transition: "border 0.3s" },
              onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
              onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; }
            }, "Refresh")
          )
      )
    ),
    // Lightbox overlay for images
    lightboxImage && React.createElement('div', {
      className: "fixed inset-0 bg-black/80 flex items-center justify-center z-50",
      onClick: () => setLightboxImage(null)
    },
      React.createElement('img', {
        src: lightboxImage,
        alt: "Expanded",
        className: "max-w-full max-h-full rounded-xl shadow-2xl"
      })
    ),
    // IDE Fullscreen Overlay
    showIDEFull && React.createElement('div', {
      className: "fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",
      style: { color: "#fff" }
    },
      React.createElement('div', {
        className: "flex md:flex-row flex-col w-[98vw] h-[98vh] md:w-[90vw] md:h-[90vh] rounded-xl md:rounded-2xl overflow-hidden outline-glow active relative gap-2 p-4",
        style: { boxShadow: "0 0 60px 0 rgba(59,130,246,0.12)" }
      },
        // On mobile, close button at top-right fixed
        React.createElement('button', {
          onClick: () => setShowIDEFull(false),
          className: "fixed md:static top-4 right-4 md:top-auto md:right-auto z-50 text-white bg-black/40 rounded-full w-10 h-10 flex items-center justify-center hover:bg-black/60 outline-glow text-2xl font-bold md:w-8 md:h-8",
          style: { border: "2px solid transparent", transition: "border 0.3s" },
          onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
          onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; }
        }, "×"),
        // Left: file explorer
        React.createElement('div', {
          className: "flex flex-col bg-black/30 outline-glow active border-r border-gray-700 md:h-full md:w-72 w-full h-1/3 md:rounded-l-2xl rounded-xl md:rounded-xl-none p-3 gap-2 overflow-y-auto",
          style: { borderRadius: "1rem", minWidth: 0 }
        },
          // Breadcrumb + Up
          React.createElement('div', { className: "flex items-center gap-1 mb-3 flex-wrap" },
            React.createElement('button', {
              className: "bg-black/40 hover:bg-black/60 text-white text-base md:text-sm rounded-xl px-3 py-2 md:px-2 md:py-1 outline-glow",
              style: { border: "2px solid transparent", transition: "border 0.3s", marginRight: "0.25rem" },
              onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
              onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; },
              onClick: () => {
                setPathStack([]);
                fetchRepoFiles(project.repo, "");
              }
            }, "root"),
            (() => {
              const segments = getBreadcrumbSegments(currentPath);
              return segments.length > 0 && segments.map((seg, idx) =>
                React.createElement(React.Fragment, { key: seg.path },
                  React.createElement('span', { className: "mx-1 text-gray-500" }, "/"),
                  idx === segments.length - 1
                    ? React.createElement('span', {
                        className: "bg-black/40 text-white text-base md:text-sm rounded-xl px-3 py-2 md:px-2 md:py-1 outline-glow font-bold"
                      }, seg.name)
                    : React.createElement('button', {
                        className: "bg-black/40 hover:bg-black/60 text-white text-base md:text-sm rounded-xl px-3 py-2 md:px-2 md:py-1 outline-glow",
                        style: { border: "2px solid transparent", transition: "border 0.3s" },
                        onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
                        onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; },
                        onClick: () => handleBreadcrumbClick(idx, segments)
                      }, seg.name)
                )
              );
            })(),
            currentPath && React.createElement('button', {
              className: "ml-2 bg-black/40 hover:bg-black/60 text-white text-base md:text-sm rounded-xl px-3 py-2 md:px-2 md:py-1 outline-glow",
              style: { border: "2px solid transparent", transition: "border 0.3s" },
              onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
              onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; },
              onClick: handleUpOne,
              title: "Up one folder"
            }, "↑ Up")
          ),
          // File explorer list
          React.createElement('div', { className: "flex-1 min-h-0 overflow-y-auto mt-1 pr-1" },
            files.length === 0
              ? React.createElement('div', { className: "text-gray-400 text-xs" }, "No files")
              : files.map((file, idx) =>
                React.createElement('div', {
                  key: idx,
                  className:
                    "flex items-center gap-2 text-white cursor-pointer hover:bg-black/60 p-2 rounded-xl outline-glow" +
                    (selectedFile && selectedFile.path === file.path ? " bg-black/60" : ""),
                  style: { border: "2px solid transparent", transition: "border 0.3s" },
                  onMouseEnter: e => { e.currentTarget.style.border = `2px solid ${themeVars.cardBorder}`; },
                  onMouseLeave: e => { e.currentTarget.style.border = "2px solid transparent"; },
                  onClick: () => {
                    if (file.type === "dir") {
                      handleDirClick(file);
                    } else {
                      fetchFileContent(file);
                    }
                  }
                },
                  file.type === "dir"
                    ? React.createElement('span', { className: "mr-1" }, "📁")
                    : React.createElement('span', { className: "mr-1" }, "📄"),
                  React.createElement('span', null, file.name)
                )
              )
          )
        ),
        // Right: code display
        React.createElement('div', {
          className: "flex-1 flex flex-col bg-black/30 rounded-xl outline-glow active md:h-full md:rounded-r-2xl w-full h-2/3 p-6 overflow-y-auto min-w-0",
          style: { borderRadius: "1rem", minWidth: 0 }
        },
          selectedFile
            ? React.createElement('pre', {
                className: "rounded-xl p-4 overflow-auto text-sm bg-black/40",
                style: { margin: 0 }
              },
                React.createElement('code', {
                  className: getLanguage(selectedFile?.name)
                }, fileContent)
              )
            : React.createElement('div', { className: "text-gray-400 text-xs p-4" }, "Select a file to view its contents")
        )
      )
    )
  );
}

function App() {
  usePageGlow();
  const [activeTab, _setActiveTab] = useState("announcements");
  const [selectedProject, setSelectedProject] = useState(null);
  const [theme, setTheme] = useState("blue"); // default theme


  // Wrap setActiveTab to also close project panel
  const setActiveTab = (tab) => {
    _setActiveTab(tab);
    setSelectedProject(null);
  };

  // Map theme to colors for gradients, glows, hovers
  const themeConfig = {
    blue: {
      gradientFrom: "#2563eb",
      gradientTo: "#60a5fa",
      hover: "#3b82f6",
      shadow: "rgba(59,130,246,0.3)",
      cardGlow: "rgba(59,130,246,0.3)",
      dotActive: "bg-blue-400",
      dotInactive: "bg-blue-900",
      button: "#3b82f6",
      panel: "#1a1a1a",
      cardBorder: "#3b82f6"
    },
    red: {
      gradientFrom: "#dc2626",
      gradientTo: "#f87171",
      hover: "#ef4444",
      shadow: "rgba(239,68,68,0.3)",
      cardGlow: "rgba(239,68,68,0.3)",
      dotActive: "bg-red-400",
      dotInactive: "bg-red-900",
      button: "#ef4444",
      panel: "#1a1a1a",
      cardBorder: "#ef4444"
    },
    purple: {
      gradientFrom: "#9333ea",
      gradientTo: "#a78bfa",
      hover: "#a21caf",
      shadow: "rgba(168,139,250,0.3)",
      cardGlow: "rgba(168,139,250,0.3)",
      dotActive: "bg-purple-400",
      dotInactive: "bg-purple-900",
      button: "#a21caf",
      panel: "#1a1a1a",
      cardBorder: "#a21caf"
    },
    epic: {
      gradientFrom: "#1a1a1a",
      gradientTo: "#1a1a1a",
      hover: "#0078ff",
      shadow: "rgba(0,120,255,0.3)",
      cardGlow: "rgba(0,120,255,0.3)",
      dotActive: "bg-blue-500",
      dotInactive: "bg-blue-900",
      button: "#0078ff",
      panel: "#1a1a1a",
      cardBorder: "#0078ff"
    }
  };
  const themeVars = themeConfig[theme];
  // Make themeVars globally accessible for Sidebar (for simplicity)
  window._themeVars = themeVars;

  // Determine which projects list to show for grid
  let gridProjects = [];
  if (activeTab === "dll") gridProjects = projects.dll;
  else if (activeTab === "backend") gridProjects = projects.backend;
  else if (activeTab === "launcher") gridProjects = projects.launcher;
  else if (activeTab === "sdk") gridProjects = projects.sdk;
  else if (activeTab === "projectz") gridProjects = projects.projects;
  else if (activeTab === "tools") gridProjects = projects.tools;
  else if (activeTab === "builds") gridProjects = projects.builds;

  // For overlay/shrink effect
  const panelOpen = !!selectedProject;

  // Set CSS variables for theme on body or root
  useEffect(() => {
    document.body.style.setProperty('--theme-gradient-from', themeVars.gradientFrom);
    document.body.style.setProperty('--theme-gradient-to', themeVars.gradientTo);
    document.body.style.setProperty('--theme-hover', themeVars.hover);
    document.body.style.setProperty('--theme-shadow', themeVars.shadow);
    document.body.style.setProperty('--theme-card-glow', themeVars.cardGlow);
    document.documentElement.style.setProperty('--theme-card-glow', themeVars.cardGlow);
    document.body.style.setProperty('--theme-panel', themeVars.panel);
    document.body.style.setProperty('--theme-border', themeVars.cardBorder);
    // Always use panel color as background
    document.body.style.background = themeVars.panel;
  }, [theme, themeVars]);

  // Custom Announcement and ProjectCard with theme support
  function ThemedAnnouncement() {
    const [currentIndex, setCurrentIndex] = useState(0);
    const total = announcementsData.length;
    const [active, setActive] = useState(false);
    const ref = useRef(null);
    // Animation state
    const [prevIndex, setPrevIndex] = useState(0);
    const [slideDir, setSlideDir] = useState(0); // 1: right, -1: left, 0: none
    useEffect(() => {
      if (currentIndex > prevIndex) setSlideDir(1);
      else if (currentIndex < prevIndex) setSlideDir(-1);
      else setSlideDir(0);
      setPrevIndex(currentIndex);
    }, [currentIndex]);
    const prev = () => setCurrentIndex((currentIndex - 1 + total) % total);
    const next = () => setCurrentIndex((currentIndex + 1) % total);
    const current = announcementsData[currentIndex];
    const handleMouseMove = (event) => {
      if (!ref.current) return;
      const rect = ref.current.getBoundingClientRect();
      const x = event.clientX;
      const y = event.clientY;
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const dist = Math.hypot(centerX - x, centerY - y);
      if (dist <= 100) {
        if (!active) setActive(true);
        // Update CSS variables for gradient position
        const relX = x - rect.left;
        const relY = y - rect.top;
        ref.current.style.setProperty('--x', relX + 'px');
        ref.current.style.setProperty('--y', relY + 'px');
      } else {
        if (active) setActive(false);
      }
    };
    // Slide direction: slide in from right if next, left if prev
    // Set translateX to 0 when active, to 100% or -100% when inactive
    // We'll use a key to force React to remount the announcement on index change
    return e('div', {
      ref,
      className: `w-full h-full flex justify-center items-center relative`,
      style: {
        '--theme-gradient-from': themeVars.gradientFrom,
        '--theme-gradient-to': themeVars.gradientTo
      }
    },
      e('div', {
        key: currentIndex,
        className:
          `w-full h-full flex justify-center items-center relative outline-glow transition-transform duration-500 ease-in-out${active ? ' active' : ''}`,
        onMouseMove: handleMouseMove,
        onMouseLeave: () => setActive(false),
        onMouseEnter: () => setActive(true),
        style: {
          transform: `translateX(0)`,
          // For accessibility, we don't animate on first render
        }
      },
        e('div', { className: "relative max-w-4xl flex flex-col justify-center items-center space-y-6 w-full h-full px-6" },
          e('img', { src: current.image, alt: current.title, className: "rounded-xl mx-auto max-w-full max-h-[60vh] object-contain" }),
          e('h2', { className: "text-4xl font-bold text-white" }, current.title),
          e('p', { className: "text-white text-lg max-w-3xl" }, current.text),
          e('div', { className: "absolute top-1/2 left-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: prev, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') prev(); } },
            e('span', { className: "text-white" }, "‹")
          ),
          e('div', { className: "absolute top-1/2 right-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: next, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') next(); } },
            e('span', { className: "text-white" }, "›")
          ),
          e('div', { className: "flex justify-center space-x-2 mt-6" },
            announcementsData.map((_, idx) =>
              e('span', {
                key: idx,
                className: `w-3 h-3 rounded-full cursor-pointer ${idx === currentIndex ? themeVars.dotActive : themeVars.dotInactive} text-white`,
                onClick: () => setCurrentIndex(idx),
                role: "button",
                tabIndex: 0,
                onKeyDown: (e) => { if(e.key === 'Enter') setCurrentIndex(idx); }
              })
            )
          )
        )
      )
    );
  }

  function ThemedProjectCard(props) {
    // Same logic as ProjectCard but with dynamic theme on outline-glow
    const [active, setActive] = useState(false);
    const [expanded, setExpanded] = useState(false);
    const ref = useRef(null);
    // Border should be transparent unless cursor is close
    const handleMouseMove = (event) => {
      if (!ref.current) return;
      const rect = ref.current.getBoundingClientRect();
      const x = event.clientX;
      const y = event.clientY;
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const dist = Math.hypot(centerX - x, centerY - y);
      setActive(dist <= 100);
    };
    const showReadMore = props.description && props.description.length > 20;
    const collapsedDesc = props.description ? props.description.slice(0, 20) + "..." : "";
    // Accept style prop for slide-in animation
    const cardStyle = Object.assign({
      transition: "transform 0.5s ease-in-out, min-height 0.2s, box-shadow 0.2s",
      minHeight: expanded ? "8.5em" : "6.5em",
      cursor: props.onClick ? "pointer" : undefined,
      '--theme-gradient-from': themeVars.gradientFrom,
      '--theme-gradient-to': themeVars.gradientTo,
      border: active ? `2px solid ${themeVars.cardBorder}` : `2px solid transparent`
    }, props.style || {});
    // For button hover
    const readMoreBtnRef = useRef(null);
    const downloadBtnRef = useRef(null);
    // Custom hover handlers for buttons
    const handleBtnMouseEnter = (ref) => {
      if (ref.current) ref.current.style.border = `2px solid ${themeVars.cardBorder}`;
    };
    const handleBtnMouseLeave = (ref) => {
      if (ref.current) ref.current.style.border = "2px solid transparent";
    };
    // --- BEGIN BADGE PATCH ---
    // The badge should be rendered absolutely positioned inside the card container, if props.bubble exists.
    // The card container must have 'relative' class (already present).
    // The badge is placed as the first child in the div.
    // Use React.createElement directly as per instructions.
    const badge = props.bubble && React.createElement('div', {
      className: "absolute top-2 right-2 px-3 py-1 text-xs font-semibold rounded-full outline-glow",
      style: {
        backgroundColor: props.bubble.color || "#3b82f6",
        color: "#000"
      }
    }, props.bubble.text);
    // --- END BADGE PATCH ---
    return e('div', {
      ref,
      className: `w-[200px] bg-transparent rounded-2xl shadow-xl p-8 text-center relative outline-glow group flex flex-col justify-center items-center transition-all duration-200${active ? ' active' : ''}`,
      style: cardStyle,
      onMouseEnter: (e) => setActive(true),
      onMouseLeave: () => setActive(false),
      onMouseMove: handleMouseMove,
      onClick: props.onClick
    },
      // Badge inserted right inside the container div, before main content
      badge,
      props.image && e('img', {
        src: props.image,
        alt: props.title + " logo",
        className: "w-16 h-16 mx-auto rounded mb-2 object-cover"
      }),
      e('h3', { className:"text-2xl font-bold mb-4 text-white" }, props.title),
      e('p', {
        className:"text-white mb-4 transition-all duration-200",
        style: expanded || !showReadMore
          ? {}
          : { overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis', minHeight: '1.75em' }
      },
        expanded || !showReadMore ? props.description : collapsedDesc
      ),
      showReadMore &&
        e('button', {
          ref: readMoreBtnRef,
          onClick: (event) => { event.stopPropagation(); setExpanded(!expanded); },
          className: "text-sm mt-2 hover:underline",
          style: {
            background: "transparent",
            padding: "0.25rem 0.5rem",
            color: "#fff",
            border: "2px solid transparent",
            transition: "border 0.3s ease, box-shadow 0.3s ease"
          },
          onMouseEnter: () => handleBtnMouseEnter(readMoreBtnRef),
          onMouseLeave: () => handleBtnMouseLeave(readMoreBtnRef)
        }, expanded ? "Read Less" : "Read More"),
      e('div', { className:"flex justify-center space-x-2 mt-2" },
        props.repo && e('a', {
          href:props.repo,
          target:"_blank",
          rel:"noopener noreferrer",
          className:"flex items-center space-x-2 hover:text-blue-400",
          onClick: (event) => event.stopPropagation()
        },
          e('img', {
            src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg",
            alt: "GitHub",
            style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
            className: "inline-block"
          })
        ),
        props.discord && e('a', {
          href:props.discord,
          target:"_blank",
          rel:"noopener noreferrer",
          className:"flex items-center space-x-2 hover:text-blue-400",
          onClick: (event) => event.stopPropagation()
        },
          e('img', {
            src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/discord.svg",
            alt: "Discord",
            style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
            className: "inline-block"
          })
        )
      ),
      // Download button (if downloadLink is provided)
      props.downloadLink && e('div', { className: "mt-2" },
        e('button', {
          ref: downloadBtnRef,
          onClick: (event) => {
            event.stopPropagation();
            const a = document.createElement('a');
            a.href = props.downloadLink;
            a.download = '';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          },
          className: "px-3 py-1 rounded-lg text-white text-sm",
          style: {
            background: "transparent",
            padding: "0.25rem 0.5rem",
            color: "#fff",
            border: "2px solid transparent",
            transition: "border 0.3s ease, box-shadow 0.3s ease"
          },
          onMouseEnter: () => handleBtnMouseEnter(downloadBtnRef),
          onMouseLeave: () => handleBtnMouseLeave(downloadBtnRef)
        }, "Download")
      )
    );
  }

  function ThemedProjectGrid({ projects, onProjectClick }) {
    // Custom handler to close and open the side panel smoothly
    const handleCardClick = (project) => {
      setSelectedProject(null);
      setTimeout(() => {
        setSelectedProject(project);
      }, 20);
    };
    // Slide-in animation for grid container: cards slide in one by one
    const [mounted, setMounted] = useState(false);
    useEffect(() => { setMounted(true); }, []);
    return e('div', {
      className: "flex flex-wrap justify-start gap-4",
    },
      projects.map((p, i) =>
        e(ThemedProjectCard, {
          ...p,
          key: i,
          onClick: onProjectClick ? (() => handleCardClick(p)) : undefined,
          style: {
            transform: mounted ? 'translateX(0)' : 'translateX(100%)',
            transition: `transform 0.5s ease-out ${i * 0.1}s`
          }
        })
      )
    );
  }

  // SettingsPanel
  function ThemedSettingsPanel(props) {
    // Patch SettingsPanel to add border-on-hover to theme buttons
    const themes = [
      { name: "Black & Blue", gradient: "blue", colors: { from: "#2563eb", to: "#60a5fa", hover: "#3b82f6" } },
      { name: "Black & Red", gradient: "red", colors: { from: "#dc2626", to: "#f87171", hover: "#ef4444" } },
      { name: "Black & Purple", gradient: "purple", colors: { from: "#9333ea", to: "#a78bfa", hover: "#a21caf" } },
      { name: "EpicGames", gradient: "epic", colors: { button: "#0078ff", panel: "#1a1a1a", cardBorder: "#0078ff" } }
    ];
    // For each button, manage a ref for border on hover
    const btnRefs = React.useRef([]);
    // Use themeVars from outer scope
    return (
      e('div', { className: "flex flex-col items-center space-y-4 p-4" },
        e('h2', { className: "text-xl font-bold text-white mb-4" }, "Select Theme"),
        themes.map((themeObj, i) =>
          e('button', {
            key: themeObj.name,
            ref: (el) => btnRefs.current[i] = el,
            onClick: () => props.setTheme(themeObj.gradient),
            className:
              "w-full py-2 px-4 rounded-lg bg-gray-800 text-white transition-colors" +
              (props.currentTheme === themeObj.gradient ? " ring-2 ring-offset-2 ring-white" : ""),
            style:
              props.currentTheme === themeObj.gradient
                ? (
                    themeObj.gradient === "epic"
                      ? { background: themeObj.colors.button, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
                      : { background: `linear-gradient(90deg, ${themeObj.colors.from}, ${themeObj.colors.to})`, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
                  )
                : themeObj.gradient === "epic"
                  ? { background: "#23272e", color: "#fff", border: "2px solid transparent", transition: "border 0.3s ease, background 0.3s ease" }
                  : { border: "2px solid transparent", transition: "border 0.3s ease, background 0.3s ease" },
            onMouseEnter: (e) => {
              if (btnRefs.current[i]) btnRefs.current[i].style.border = `2px solid ${themeVars.cardBorder}`;
            },
            onMouseLeave: (e) => {
              if (btnRefs.current[i]) btnRefs.current[i].style.border = "2px solid transparent";
            }
          }, themeObj.name)
        )
      )
    );
  }

  // Main return
  return e('div', {
      className: "flex md:flex-row flex-col h-screen text-white relative w-full",
      style: {
        '--theme-gradient-from': themeVars.gradientFrom,
        '--theme-gradient-to': themeVars.gradientTo
      }
    },
    e(Sidebar, { activeTab, setActiveTab }),
    e('main', {
      className:
        "flex-1 w-full h-full overflow-y-auto p-4 flex flex-col gap-2 md:p-8 transition-all duration-300",
      style: panelOpen
        ? { transform: "scale(0.97)", filter: "blur(2px)", transition: "all 0.3s" }
        : { transform: "scale(1)", filter: "blur(0)" }
    },
      activeTab === "settings"
        ? e(ThemedSettingsPanel, { setTheme })
        : activeTab === "announcements"
          ? e(ThemedAnnouncement)
          : gridProjects.length > 0
            ? e(ThemedProjectGrid, { projects: gridProjects, onProjectClick: setSelectedProject })
            : null
    ),
    panelOpen && e(ProjectSidePanel, { project: selectedProject, onClose: () => setSelectedProject(null) })
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(e(App));
</script>
</body>
</html>