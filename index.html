<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fortnite Modding Vault</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<style>
:root {
  --theme-bg: #121212;
  --theme-panel: #1a1a1a;
  --theme-border: #23272e;
  --theme-card-glow: rgba(0, 120, 255, 0.5); /* Epic blue glow */
  --theme-text: #ffffff;
  --theme-text-secondary: #b7b7b7;
}

body {
  background-color: var(--theme-bg);
  color: var(--theme-text);
  font-family: "Segoe UI", Arial, sans-serif;
  position: relative;
  z-index: 1;
}

.sidebar {
  background: var(--theme-panel);
  border-right: 1px solid var(--theme-border);
  box-shadow: 2px 0 16px 0 rgba(0,0,0,0.5);
}

button, .card {
  background: var(--theme-panel);
  border: 1px solid var(--theme-border);
  color: var(--theme-text);
  transition: border-color 0.3s, box-shadow 0.3s, background 0.3s;
  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.16);
}

button:hover, .card:hover {
  border-color: var(--theme-card-glow);
  box-shadow: 0 0 16px var(--theme-card-glow), 0 2px 16px 0 rgba(0,0,0,0.36);
  background: #181f26;
}

h1, h2, h3 {
  color: var(--theme-text);
  letter-spacing: 0.01em;
}

p {
  color: var(--theme-text-secondary);
}

/* Epic Games Launcher blue glow overlay */
.page-glow-overlay {
  pointer-events: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 0;
  background: radial-gradient(
    circle at var(--x,50%) var(--y,50%),
    rgba(0,120,255,0.08) 0%,
    rgba(0,120,255,0.04) 40%,
    transparent 80%
  );
  transition: background-position 0.2s;
}

/* Outline blue glow for cards and buttons */
.outline-glow {
  position: relative;
  z-index: 1;
}
.outline-glow::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 2px;
  background: radial-gradient(
    circle at var(--x, 100%) var(--y, 100%),
    var(--theme-card-glow) 0%,
    transparent 80%
  );
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.outline-glow.active::before {
  opacity: 1;
}

/* Card and button border radius and spacing */
.card-gradient-border {
  border-radius: 1.5rem;
  background-clip: padding-box;
  position: relative;
  box-shadow: none;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  background-color: transparent;
  isolation: isolate;
  -webkit-mask-composite: exclude;
  mask-composite: exclude;
  position: relative;
  z-index: 1;
}

button.w-full.text-left {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
  border-radius: 0.75rem;
  overflow: visible;
  background-color: transparent;
  isolation: isolate;
  -webkit-mask-composite: exclude;
  mask-composite: exclude;
  position: relative;
  z-index: 1;
}

.sidebar-icon-img {
  width: 20px;
  height: 20px;
  border-radius: 0.5rem;
  object-fit: cover;
  background: transparent 95%;
  flex-shrink: 0;
  margin-right: 0.75rem;
  box-shadow: 0 0 4px 0 rgba(0,120,255,0.15);
}

.sidebar-right-glow {
  position: absolute;
  top: 0;
  right: 0;
  width: 2px;
  height: 100%;
  background: linear-gradient(
    180deg,
    var(--theme-card-glow) 0%,
    rgba(0,0,0,0) 50%,
    var(--theme-card-glow) 100%
  );
  filter: blur(4px);
  pointer-events: none;
  transition: background 0.3s ease;
  z-index: 3;
}

aside {
  border-right: none !important;
}
</style>
</head>
<body class="bg-black text-white">
<div class="page-glow-overlay"></div>
<div id="root" style="position: relative; z-index: 1;"></div>
<script>
const e = React.createElement;
const { useState, useEffect, useRef } = React;

/* Data */
// ==========================
// How to add new projects:
// ==========================
// - Each key in the 'projects' object is a category, e.g. 'dll', 'backend', 'launcher', 'sdk', 'tools', etc.
// - To add a new project to a category, add a new object to the corresponding array.
// - Each project object can have:
//   - title: String (required)
//   - description: String (required)
//   - repo: String (optional, URL to repository)
//   - discord: String (optional, URL to Discord)
//
// Example: Adding new projects to multiple categories:
//
// projects.dll.push({
//   title: "Another DLL",
//   description: "Description for another DLL project.",
//   repo: "https://github.com/example/another-dll",
//   discord: "https://discord.gg/another"
// });
//
// projects.backend.push({
//   title: "Backend Project Example",
//   description: "A backend for Fortnite mods.",
//   repo: "https://github.com/example/backend",
//   discord: "https://discord.gg/backend"
// });
//
// - Projects added in this way will automatically show in the UI under their category tab.
// - You can add as many projects as you want to each category.
//
// ==========================
const projects = {
  dll: [
    {
      title: "Raider 3.5",
      description: "Fortnitev3.5 SDK based game server.",
      repo: "https://github.com/kem0x/raider3.5",
      image: "https://avatars.githubusercontent.com/u/19430119?v=4",
      // Example images for screenshots
      images: [
        "https://gamingbolt.com/wp-content/uploads/2018/02/Fortnite.jpg"
      ]
      // discordMemberCount: 1532 // Example count
    },
    {
      title: "Universal Walking Simulator",
      description: "Fortnite season 1-19 game server.",
      repo: "https://github.com/Milxnor/Universal-Walking-Simulator",
      image: "https://avatars.githubusercontent.com/u/84999745?v=4",
      images: [
        "https://static.wikia.nocookie.net/fortnite/images/b/be/Key_Art_-_Battle_Pass_Season_10_-_Fortnite.jpg/revision/latest/scale-to-width-down/1200?cb=20190801082806"
      ]
    },
    {
      title: "Cobalt",
      description: "Universal SSL Bypass for Fortnite, made by Milxnor.",
      repo: "https://github.com/Milxnor/Cobalt",
      image: "https://avatars.githubusercontent.com/u/84999745?v=4"
      // No images for this
    }
    // Add more DLL projects here
  ],
  projects: [
    {
      title: "Project Reboot",
      description: "Made by Milxnor, and many others.",
      repo: "https://github.com/Milxnor/Project-Reboot-3.0/tree/master",
      discord: "https://discord.gg/H9sGkxBThS",
      image: "https://pbs.twimg.com/profile_images/1934351954505052160/mUca_K1Q_400x400.jpg",
      discordMemberCount: 4820 // Example count
    },
    {
      title: "Era",
      description: "Project Era, the oldest hosting server. Made by dani, and more.",
      discord: "https://discord.gg/erafn",
      image: "https://cdn2.steamgriddb.com/grid/7eb374c4c89c32d0fa63c2b4af5eefdc.png"
    },
    {
      title: "Aera",
      description: "Join now and relieve the Ch1 S2 just like it was in 2017!",
      discord: "https://discord.gg/sMFSe3zuPY",
      image: "https://cdn.discordapp.com/attachments/1409221127993032854/1409222683840872598/Aera.png?ex=68ac9865&is=68ab46e5&hm=70b293069add9e43725921c1d0f470d7f99c2e9c9ee0eecb4fa0b677f200db3c&"
    },
    {
      title: "NL Hybrid",
      description: "A Fortnite hybrid server with unrealesed skins, every cosmetic, and more.",
      discord: "https://discord.gg/pEwDG9Wj",
      image: ""
    }
    ,
    {
      title: "Apollo",
      description: "Relieve Chapter 2 Season 1 Fortnite again using ApolloMP!",
      discord: "https://discord.gg/FbJcQvQ3",
      image: "https://cdn.discordapp.com/attachments/1405428025373233232/1409215324263547102/377e07c877e33a411846ece2c73cb9d9-1.png?ex=68ac918b&is=68ab400b&hm=63a18deab3a22d022ab854005982f72fd9cfa77d68426b635803cc5f75d82725&",
      images: [
        "https://cdn.mos.cms.futurecdn.net/TNHyeyqTofRfpqVFMzb8QS.jpg"
    ]
    }
    // Add more 'projects' category projects here
  ],
  backend: [
    {
      title: "Lawin Server V1",
      description: "Fortnite backend, made by Lawin.",
      repo: "https://github.com/Lawin0129/LawinServer",
      image: "https://placehold.co/64x64/9333ea/fff?text=V1",
      images: [
        "https://placehold.co/400x200",
        "https://placehold.co/400x200"
      ]
    },
    {
      title: "Lawin Server V2",
      description: "LawinServer V2 is a fortnite backend written in Node.js that features an account system and xmpp.",
      repo: "https://github.com/Lawin0129/LawinServerV2",
      image: "https://placehold.co/64x64/6d28d9/fff?text=V2"
      // No images for this
    }
    // Add more backend projects here
  ],
  launcher: [
    // Add launcher projects here
  ],
  sdk: [
    // Add SDK projects here
  ],
  tools: [
    // Add tools projects here
  ],
  builds: 
  [
    {
      title: "Fortnite 1.8",
      description: "One of the earliest versions of Fortnite.",
      downloadLink: "https://builds.rebootfn.org/1.8.rar",
      image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_FrC0_lOL3H62-j9uuUR1cvSvZpRvUW3DPJRdbyakbK2aJDm6jdfN0l9gqLGmTtmeOQk&usqp=CAU",
      images: [
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdtwlmv8Pb2zEPG6PCiyBEW2hLWQ4LghC4IA&s",
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQRovs4-9xBGPSpYora3Yo-N3JILUPxKpQ7g&s"
      ]
    },
    {
      title: "Fortnite 1.10",
      description: "One of the earliest versions of Fortnite.",
      downloadLink: "https://builds.rebootfn.org/1.10.rar",
      image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_FrC0_lOL3H62-j9uuUR1cvSvZpRvUW3DPJRdbyakbK2aJDm6jdfN0l9gqLGmTtmeOQk&usqp=CAU",
      images: [
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdtwlmv8Pb2zEPG6PCiyBEW2hLWQ4LghC4IA&s",
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQRovs4-9xBGPSpYora3Yo-N3JILUPxKpQ7g&s"
      ]
    },
    {
      title: "Fortnite 2.4.2",
      description: "One of the earliest versions of Fortnite.",
      downloadLink: "https://builds.rebootfn.org/2.4.2.zip",
      image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS_FrC0_lOL3H62-j9uuUR1cvSvZpRvUW3DPJRdbyakbK2aJDm6jdfN0l9gqLGmTtmeOQk&usqp=CAU",
      images: [
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdtwlmv8Pb2zEPG6PCiyBEW2hLWQ4LghC4IA&s",
        "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQRovs4-9xBGPSpYora3Yo-N3JILUPxKpQ7g&s"
      ]
    },
    {

    }
  ]
};

const tabs = [
  { id: "announcements", label: "Announcements" },
  { id: "projectz", label: "Projects" },
  { id: "dll", label: "DLL" },
  { id: "backend", label: "Backend" },
  { id: "launcher", label: "Launcher" },
  { id: "sdk", label: "SDK" },
  { id: "builds", label: "Builds" },
  { id: "tools", label: "Tools" }
  // Settings tab will be rendered separately at the bottom
];

/* Hook for page-level cursor-follow glow */
function usePageGlow() {
  useEffect(() => {
    const overlay = document.querySelector('.page-glow-overlay');
    if (!overlay) return;
    const onMove = (e) => {
      const x = (e.clientX / window.innerWidth) * 100;
      const y = (e.clientY / window.innerHeight) * 100;
      overlay.style.setProperty('--x', x + '%');
      overlay.style.setProperty('--y', y + '%');
    };
    window.addEventListener('mousemove', onMove);
    return () => window.removeEventListener('mousemove', onMove);
  }, []);
}

/* Components */
// Map tab id to example icon URL (replace with real images later)
const tabIcons = {
  announcements: "https://img.icons8.com/pastel-glyph/64/FFFFFF/bullhorn-megaphone--v2.png",
  dll: "https://img.icons8.com/ios-filled/50/FFFFFF/dll.png",
  backend: "https://img.icons8.com/ios-filled/100/FFFFFF/code.png",
  launcher: "https://img.icons8.com/ios-filled/100/FFFFFF/missile.png",
  sdk: "https://img.icons8.com/external-tal-revivo-light-tal-revivo/96/FFFFFF/external-skd-badge-logotype-isolated-on-white-background-development-light-tal-revivo.png",
  tools: "https://img.icons8.com/ios-filled/100/FFFFFF/maintenance.png",
  projects: "https://img.icons8.com/ios-filled/100/FFFFFF/ms-project.png",
  settings: "https://img.icons8.com/ios-filled/50/FFFFFF/settings.png"
};

function SettingsPanel({ setTheme, currentTheme }) {
  const themes = [
    { name: "Black & Blue", gradient: "blue", colors: { from: "#2563eb", to: "#60a5fa", hover: "#3b82f6" } },
    { name: "Black & Red", gradient: "red", colors: { from: "#dc2626", to: "#f87171", hover: "#ef4444" } },
    { name: "Black & Purple", gradient: "purple", colors: { from: "#9333ea", to: "#a78bfa", hover: "#a21caf" } },
    { name: "EpicGames", gradient: "epic", colors: { button: "#0078ff", panel: "#1a1a1a", cardBorder: "#0078ff" } }
  ];
  return (
    e('div', { className: "flex flex-col items-center space-y-4 p-4" },
      e('h2', { className: "text-xl font-bold text-white mb-4" }, "Select Theme"),
      themes.map(theme =>
        e('button', {
          key: theme.name,
          onClick: () => setTheme(theme.gradient),
          className:
            "w-full py-2 px-4 rounded-lg bg-gray-800 text-white transition-colors" +
            (currentTheme === theme.gradient ? " ring-2 ring-offset-2 ring-white" : ""),
          style: currentTheme === theme.gradient
            ? (
                theme.gradient === "epic"
                  ? { background: theme.colors.button, color: "#fff" }
                  : { background: `linear-gradient(90deg, ${theme.colors.from}, ${theme.colors.to})`, color: "#fff" }
              )
            : theme.gradient === "epic"
              ? { background: "#23272e", color: "#fff" }
              : undefined
        }, theme.name)
      )
    )
  );
}

// Removed useSidebarGlow and sidebar partial glow logic

function Sidebar({ activeTab, setActiveTab }) {
  const [activeIndex, setActiveIndex] = useState(null);
  // Get themeVars from window, fallback to blue if not present
  const themeVars = window._themeVars || {
    button: "#3b82f6",
    panel: "#1a1a1a",
    cardBorder: "#3b82f6"
  };
  // For refs to sidebar buttons for border manipulation
  const btnRefs = React.useRef([]);
  return e('aside', {
      className: "w-60 bg-black/80 relative flex flex-col p-4",
      style: { background: themeVars.panel }
    },
    e('h1', { className: "text-xl font-bold mb-8 text-white z-10 relative" }, "Project Hub"),
    e('nav', { className: "space-y-3 z-10 relative" },
      tabs.map((tab, index) => {
        return e('button', {
          key: tab.id,
          ref: el => btnRefs.current[index] = el,
          className:
            [
              "w-full",
              "text-left",
              "p-3",
              "rounded-lg",
              "relative",
              "group",
              "bg-transparent",
              "flex",
              "items-center",
              "outline-glow"
            ].filter(Boolean).join(" "),
          onClick: ()=>setActiveTab(tab.id),
          onMouseEnter: (event) => {
            setActiveIndex(index);
            if (btnRefs.current[index])
              btnRefs.current[index].style.border = `2px solid ${themeVars.cardBorder}`;
          },
          onMouseLeave: (event) => {
            setActiveIndex(null);
            if (activeTab !== tab.id && btnRefs.current[index])
              btnRefs.current[index].style.border = "2px solid transparent";
          },
          style: activeTab === tab.id
            ? { backgroundColor: themeVars.button, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
            : { backgroundColor: "transparent", color: "#fff", border: "2px solid transparent", transition: "border 0.3s ease" }
        },
          e('img', {
            src: tabIcons[tab.id] || "https://placehold.co/20x20",
            alt: "",
            className: "sidebar-icon-img"
          }),
          e('span', { className:"relative z-10 text-white" }, tab.label)
        )
      })
    ),
    // Settings tab at the bottom of sidebar
    e('div', { className: "mt-auto flex flex-col z-10 relative" },
      (() => {
        // Use a ref for the settings button
        const settingsRef = React.useRef(null);
        return e('button', {
          ref: settingsRef,
          className:
            [
              "w-full",
              "text-left",
              "p-3",
              "rounded-lg",
              "relative",
              "group",
              "bg-transparent",
              "flex",
              "items-center",
              "outline-glow"
            ].filter(Boolean).join(" "),
          onClick: () => setActiveTab("settings"),
          onMouseEnter: (event) => {
            setActiveIndex("settings");
            if (settingsRef.current)
              settingsRef.current.style.border = `2px solid ${themeVars.cardBorder}`;
          },
          onMouseLeave: (event) => {
            setActiveIndex(null);
            if (activeTab !== "settings" && settingsRef.current)
              settingsRef.current.style.border = "2px solid transparent";
          },
          style: activeTab === "settings"
            ? { backgroundColor: themeVars.button, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
            : { backgroundColor: "transparent", color: "#fff", border: "2px solid transparent", transition: "border 0.3s ease" }
        },
          e('img', {
            src: tabIcons.settings,
            alt: "",
            className: "sidebar-icon-img"
          }),
          e('span', { className: "relative z-10 text-white" }, "Settings")
        );
      })()
    ),
    e('div', { className: "sidebar-right-glow" })
  );
}

const announcementsData = [
  {
    image: "https://pbs.twimg.com/media/GU-4R2BXYAAq07y.jpg:large",
    title: "Updates",
    text: "You can now download Fortnite builds! Check it out at 'Builds'."
  },
  {
    image: "https://pbs.twimg.com/media/FmIZIQmXEAMr3Bq.jpg:large",
    title: "Ack",
    text: "Discord Member Count, card is currently broken."
  },
  {
    image: "https://www.therisingnews.com/wp-content/uploads/2024/03/GILT9hCWAAA-EtR.jpeg",
    title: "Reminder",
    text: "If you'd like to add a project please add me on discord @opensync"
  }
];

function Announcement() {
  const [currentIndex, setCurrentIndex] = useState(0);
  const total = announcementsData.length;
  const [active, setActive] = useState(false);
  const ref = useRef(null);

  const prev = () => {
    setCurrentIndex((currentIndex - 1 + total) % total);
  };

  const next = () => {
    setCurrentIndex((currentIndex + 1) % total);
  };

  const current = announcementsData[currentIndex];

  const handleMouseMove = (event) => {
    if (!ref.current) return;
    const rect = ref.current.getBoundingClientRect();
    const x = event.clientX;
    const y = event.clientY;
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const dist = Math.hypot(centerX - x, centerY - y);
    if (dist <= 100) {
      if (!active) setActive(true);
      // Update CSS variables for gradient position
      const relX = x - rect.left;
      const relY = y - rect.top;
      ref.current.style.setProperty('--x', relX + 'px');
      ref.current.style.setProperty('--y', relY + 'px');
    } else {
      if (active) setActive(false);
    }
  };

  return e('div', {
    ref,
    className: `w-full h-full flex justify-center items-center relative outline-glow${active ? ' active' : ''}`,
    onMouseMove: handleMouseMove,
    onMouseLeave: () => setActive(false),
    onMouseEnter: () => setActive(true)
  },
    e('div', { className: "relative max-w-4xl flex flex-col justify-center items-center space-y-6 w-full h-full px-6" },
      e('img', { src: current.image, alt: current.title, className: "rounded-xl mx-auto max-w-full max-h-[60vh] object-contain" }),
      e('h2', { className: "text-4xl font-bold text-white" }, current.title),
      e('p', { className: "text-white text-lg max-w-3xl" }, current.text),
      e('div', { className: "absolute top-1/2 left-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: prev, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') prev(); } },
        e('span', { className: "text-white" }, "â€¹")
      ),
      e('div', { className: "absolute top-1/2 right-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: next, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') next(); } },
        e('span', { className: "text-white" }, "â€º")
      ),
      e('div', { className: "flex justify-center space-x-2 mt-6" },
        announcementsData.map((_, idx) =>
          e('span', {
            key: idx,
            className: `w-3 h-3 rounded-full cursor-pointer ${idx === currentIndex ? 'bg-blue-400' : 'bg-blue-900'} text-white`,
            onClick: () => setCurrentIndex(idx),
            role: "button",
            tabIndex: 0,
            onKeyDown: (e) => { if(e.key === 'Enter') setCurrentIndex(idx); }
          })
        )
      )
    )
  );
}

function ProjectCard({ title, description, repo, discord, image, onClick }) {
  const [active, setActive] = useState(false);
  const [expanded, setExpanded] = useState(false); // Track expansion
  const ref = useRef(null);

  const handleMouseMove = (event) => {
    if (!ref.current) return;
    const rect = ref.current.getBoundingClientRect();
    const x = event.clientX;
    const y = event.clientY;
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const dist = Math.hypot(centerX - x, centerY - y);
    if (dist <= 100) {
      if (!active) setActive(true);
    } else {
      if (active) setActive(false);
    }
  };

  // Collapse if description is longer than 20 chars
  const showReadMore = description && description.length > 20;
  // Only show first 20 chars + ... when collapsed
  const collapsedDesc = description ? description.slice(0, 20) + "..." : "";

  // Animate height for expand/collapse and allow layout to reflow
  const cardStyle = {
    transition: "min-height 0.2s, box-shadow 0.2s",
    minHeight: expanded ? "8.5em" : "6.5em",
    cursor: onClick ? "pointer" : undefined
  };

  return 
('div', {
    ref,
    className: `w-[200px] bg-transparent rounded-2xl shadow-xl p-8 text-center relative outline-glow group flex flex-col justify-center items-center transition-all duration-200${active ? ' active' : ''}`,
    style: cardStyle,
    onMouseEnter: () => setActive(true),
    onMouseLeave: () => setActive(false),
    onMouseMove: handleMouseMove,
    onClick: onClick
  },
    image && e('img', {
      src: image,
      alt: title + " logo",
      className: "w-16 h-16 mx-auto rounded mb-2 object-cover"
    }),
    e('h3', { className:"text-2xl font-bold mb-4 text-white" }, title),
    e('p', {
      className:"text-white mb-4 transition-all duration-200",
      style: expanded || !showReadMore
        ? {}
        : { overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis', minHeight: '1.75em' }
    },
      expanded || !showReadMore ? description : collapsedDesc
    ),
    showReadMore &&
  e('button', {
    onClick: (event) => { event.stopPropagation(); setExpanded(!expanded); },
    className: "text-sm mt-2 hover:underline",
    style: {
      background: "transparent",
      padding: 0,
      color: "#fff"
    }
  }, expanded ? "Read Less" : "Read More"),
    e('div', { className:"flex justify-center space-x-2 mt-2" },
      repo && e('a', {
        href:repo,
        target:"_blank",
        rel:"noopener noreferrer",
        className:"flex items-center space-x-2 hover:text-blue-400",
        onClick: (event) => event.stopPropagation()
      },
        e('img', {
          src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg",
          alt: "GitHub",
          style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
          className: "inline-block"
        })
      ),
      discord && e('a', {
        href:discord,
        target:"_blank",
        rel:"noopener noreferrer",
        className:"flex items-center space-x-2 hover:text-blue-400",
        onClick: (event) => event.stopPropagation()
      },
        e('img', {
          src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/discord.svg",
          alt: "Discord",
          style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
          className: "inline-block"
        })
      ),
      
    )
  );
}

function ProjectGrid({ projects, onProjectClick }) {
  // Align cards to start right next to sidebar and flow left to right, with tight gap,
  // wrap to next line as needed, and cards close together.
  return e('div', {
    className: "flex flex-wrap justify-start gap-2"
  },
    projects.map((p, i) =>
      e(ProjectCard, {
        ...p,
        key: i,
        onClick: onProjectClick ? (() => onProjectClick(p)) : undefined
      })
    )
  );
}

// Helper function to fetch Discord member count
async function fetchDiscordMemberCount({ discord, guildId }) {
  try {
    let url = null;
    if (guildId) {
      url = `https://discord.com/api/guilds/${guildId}/widget.json`;
    } else if (discord) {
      const inviteCode = discord.split("discord.gg/")[1];
      if (inviteCode) {
        url = `https://discord.com/api/v9/invites/${inviteCode}?with_counts=true&with_expiration=true`;
      }
    }
    if (!url) return { count: null };
    const res = await fetch(url);
    if (!res.ok) throw new Error("Failed to fetch");
    const data = await res.json();
    if (data.approximate_member_count) return { count: data.approximate_member_count };
    if (data.presence_count) return { count: data.presence_count };
    if (Array.isArray(data.members)) return { count: data.members.length };
    return { count: null };
  } catch (err) {
    console.error("Discord count error:", err);
    return { count: null };
  }
}

// Helper function to fetch GitHub repo stats
async function fetchGitHubRepoStats(repoUrl) {
  try {
    if (!repoUrl) return { stars: null, forks: null, contributors: null };

    const match = repoUrl.match(/github\.com\/([^/]+)\/([^/]+)/);
    if (!match) return { stars: null, forks: null, contributors: null };

    const owner = match[1];
    const repo = match[2];

    const repoRes = await fetch(`https://api.github.com/repos/${owner}/${repo}`);
    if (!repoRes.ok) throw new Error("Failed repo fetch");
    const repoData = await repoRes.json();

    const contribRes = await fetch(`https://api.github.com/repos/${owner}/${repo}/contributors?per_page=1&anon=true`);
    let contribCount = null;
    if (contribRes.ok) {
      const contribLink = contribRes.headers.get("Link");
      if (contribLink && contribLink.includes('rel="last"')) {
        const lastPageMatch = contribLink.match(/&page=(\d+)>; rel="last"/);
        if (lastPageMatch) contribCount = parseInt(lastPageMatch[1]);
      } else {
        const contribData = await contribRes.json();
        contribCount = contribData.length;
      }
    }

    return {
      stars: repoData.stargazers_count ?? null,
      forks: repoData.forks_count ?? null,
      contributors: contribCount
    };
  } catch (err) {
    console.error("GitHub API error:", err);
    return { stars: null, forks: null, contributors: null };
  }
}

// Side panel for project details
function ProjectSidePanel({ project, onClose }) {
  const { useState, useEffect, useRef } = React;
  const [visible, setVisible] = useState(false);
  const [shouldRender, setShouldRender] = useState(true);

  // discord count state
  const [memberCount, setMemberCount] = useState(null);
  const [loadingCount, setLoadingCount] = useState(false);
  const [countError, setCountError] = useState(null);

  // GitHub stats state
  const [githubStats, setGithubStats] = useState({ stars: null, forks: null, contributors: null });
  const [loadingGitHub, setLoadingGitHub] = useState(false);

  const panelRef = useRef(null);

  // Lightbox state for images
  const [lightboxImage, setLightboxImage] = useState(null);

  // Animate in on mount
  useEffect(() => {
    setTimeout(() => setVisible(true), 10);
  }, []);

  // Load discord count whenever the selected project changes
  useEffect(() => {
    let cancelled = false;
    async function load() {
      if (!project) return;
      if (!project.discord && !project.guildId && !project.discordMemberCount) {
        setMemberCount(null); return;
      }
      setLoadingCount(true);
      setCountError(null);
      try {
        const { count } = await fetchDiscordMemberCount({
          discord: project.discord,
          guildId: project.guildId
        });
        if (!cancelled) {
          if (typeof count === 'number') {
            setMemberCount(count);
          } else if (typeof project.discordMemberCount === 'number') {
            // fallback to static if provided
            setMemberCount(project.discordMemberCount);
          } else {
            setMemberCount(null);
          }
        }
      } catch (e) {
        if (!cancelled) setCountError('Unavailable');
      } finally {
        if (!cancelled) setLoadingCount(false);
      }
    }
    load();
    return () => { cancelled = true; };
  }, [project]);

  // Load GitHub stats whenever the selected project changes
  useEffect(() => {
    let cancelled = false;
    async function loadGitHub() {
      if (!project.repo) return;
      setLoadingGitHub(true);
      const stats = await fetchGitHubRepoStats(project.repo);
      if (!cancelled) setGithubStats(stats);
      setLoadingGitHub(false);
    }
    loadGitHub();
    return () => { cancelled = true; };
  }, [project]);

  const handleClose = () => {
    setVisible(false);
    setTimeout(() => {
      setShouldRender(false);
      onClose && onClose();
    }, 300);
  };

  if (!shouldRender) return null;

  return React.createElement('div', {
    ref: panelRef,
    className:
      "fixed top-0 right-0 h-full w-96 bg-transparent p-6 flex flex-col z-50 backdrop-blur-sm transition-transform duration-300 ease-in-out overflow-y-auto",
    style: {
      boxShadow: "0 0 60px 0 rgba(59,130,246,0.12)",
      transform: visible ? "translateX(0)" : "translateX(100%)"
    }
  },
    React.createElement('div', { className: "relative flex flex-col flex-1" },
      // Close
      React.createElement('button', {
        onClick: handleClose,
        className: "absolute top-2 right-2 text-white bg-black/40 rounded-full w-8 h-8 flex items-center justify-center hover:bg-blue-700/60 outline-glow z-10"
      }, React.createElement('span', { className: "text-2xl font-bold" }, "Ã—")),
      // Content card
      React.createElement('div', { className: "flex flex-col items-center outline-glow active rounded-2xl p-4 mt-6 bg-black/30 relative" },
        project.logo || project.image
          ? React.createElement('img', {
              src: project.logo || project.image,
              alt: project.title + " logo",
              className: "w-20 h-20 rounded-xl mb-4 object-cover shadow-lg"
            })
          : null,
        React.createElement('h2', { className: "text-2xl font-bold mb-2 text-white text-center" }, project.title),
        React.createElement('p', { className: "mb-4 text-white text-center" }, project.description),
        // Images grid if present
        project.images && project.images.length > 0 &&
          React.createElement('div', { className: "grid grid-cols-1 gap-4 w-full mt-4" },
            project.images.map((img, i) =>
              React.createElement('img', {
                key: i,
                src: img,
                alt: project.title + " screenshot " + (i+1),
                className: "rounded-xl object-cover shadow-lg cursor-pointer",
                onClick: () => setLightboxImage(img)
              })
            )
          ),
        React.createElement('div', { className: "flex gap-3 mb-4" },
          project.repo && React.createElement('a', {
            href: project.repo, target: "_blank", rel: "noopener noreferrer", className: "hover:text-blue-400"
          }, React.createElement('img', {
            src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg",
            alt: "GitHub", style: { width: 24, height: 24, filter: "invert(1)" }
          })),
          project.discord && React.createElement('a', {
            href: project.discord, target: "_blank", rel: "noopener noreferrer", className: "hover:text-blue-400"
          }, React.createElement('img', {
            src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/discord.svg",
            alt: "Discord", style: { width: 24, height: 24, filter: "invert(1)" }
          }))
        )
      ),
      // GitHub Stats card
      (project.repo && (
        React.createElement('div', { className: "outline-glow active bg-black/30 rounded-2xl p-4 mt-4 w-full text-center" },
          React.createElement('h3', { className: "text-lg font-bold text-white mb-2" }, "GitHub Stats"),
          React.createElement('p', { className: "text-white" }, loadingGitHub ? "Loadingâ€¦" : `â­ Stars: ${githubStats.stars ?? "Unknown"}`),
          React.createElement('p', { className: "text-white" }, loadingGitHub ? "" : `ðŸ´ Forks: ${githubStats.forks ?? "Unknown"}`),
          React.createElement('p', { className: "text-white" }, loadingGitHub ? "" : `ðŸ‘¥ Contributors: ${githubStats.contributors ?? "Unknown"}`),
          React.createElement('button', {
            onClick: async () => {
              setLoadingGitHub(true);
              const stats = await fetchGitHubRepoStats(project.repo);
              setGithubStats(stats);
              setLoadingGitHub(false);
            },
            className: "mt-3 px-3 py-1 rounded-lg bg-black/40 hover:bg-black/60 text-white text-sm"
          }, "Refresh")
        )
      )),
      // Discord Members card (separate)
      (project.discord || project.guildId || typeof project.discordMemberCount === 'number') &&
        React.createElement('div', { className: "outline-glow active bg-black/30 rounded-2xl p-4 mt-4 w-full text-center" },
          React.createElement('h3', { className: "text-lg font-bold text-white mb-1" }, "Discord Members"),
          loadingCount
            ? React.createElement('p', { className: "text-white/80" }, "Loadingâ€¦")
            : (countError
                ? React.createElement('p', { className: "text-white/70" }, "Unavailable")
                : React.createElement('p', { className: "text-white text-xl" }, memberCount ?? "Unknown")
              ),
          React.createElement('button', {
            onClick: async () => {
              // manual refresh
              setLoadingCount(true);
              const { count } = await fetchDiscordMemberCount({
                discord: project.discord,
                guildId: project.guildId
              });
              setMemberCount(typeof count === 'number' ? count : (project.discordMemberCount ?? null));
              setLoadingCount(false);
            },
            className: "mt-3 px-3 py-1 rounded-lg bg-black/40 hover:bg-black/60 text-white text-sm"
          }, "Refresh")
        )
    ),
    // Lightbox overlay for images
    lightboxImage && React.createElement('div', {
      className: "fixed inset-0 bg-black/80 flex items-center justify-center z-50",
      onClick: () => setLightboxImage(null)
    },
      React.createElement('img', {
        src: lightboxImage,
        alt: "Expanded",
        className: "max-w-full max-h-full rounded-xl shadow-2xl"
      })
    )
  );
}

function App() {
  usePageGlow();
  const [activeTab, _setActiveTab] = useState("announcements");
  const [selectedProject, setSelectedProject] = useState(null);
  const [theme, setTheme] = useState("blue"); // default theme

  // Wrap setActiveTab to also close project panel
  const setActiveTab = (tab) => {
    _setActiveTab(tab);
    setSelectedProject(null);
  };

  // Map theme to colors for gradients, glows, hovers
  const themeConfig = {
    blue: {
      gradientFrom: "#2563eb",
      gradientTo: "#60a5fa",
      hover: "#3b82f6",
      shadow: "rgba(59,130,246,0.3)",
      cardGlow: "rgba(59,130,246,0.3)",
      dotActive: "bg-blue-400",
      dotInactive: "bg-blue-900",
      button: "#3b82f6",
      panel: "#1a1a1a",
      cardBorder: "#3b82f6"
    },
    red: {
      gradientFrom: "#dc2626",
      gradientTo: "#f87171",
      hover: "#ef4444",
      shadow: "rgba(239,68,68,0.3)",
      cardGlow: "rgba(239,68,68,0.3)",
      dotActive: "bg-red-400",
      dotInactive: "bg-red-900",
      button: "#ef4444",
      panel: "#1a1a1a",
      cardBorder: "#ef4444"
    },
    purple: {
      gradientFrom: "#9333ea",
      gradientTo: "#a78bfa",
      hover: "#a21caf",
      shadow: "rgba(168,139,250,0.3)",
      cardGlow: "rgba(168,139,250,0.3)",
      dotActive: "bg-purple-400",
      dotInactive: "bg-purple-900",
      button: "#a21caf",
      panel: "#1a1a1a",
      cardBorder: "#a21caf"
    },
    epic: {
      gradientFrom: "#1a1a1a",
      gradientTo: "#1a1a1a",
      hover: "#0078ff",
      shadow: "rgba(0,120,255,0.3)",
      cardGlow: "rgba(0,120,255,0.3)",
      dotActive: "bg-blue-500",
      dotInactive: "bg-blue-900",
      button: "#0078ff",
      panel: "#1a1a1a",
      cardBorder: "#0078ff"
    }
  };
  const themeVars = themeConfig[theme];
  // Make themeVars globally accessible for Sidebar (for simplicity)
  window._themeVars = themeVars;

  // Determine which projects list to show for grid
  let gridProjects = [];
  if (activeTab === "dll") gridProjects = projects.dll;
  else if (activeTab === "backend") gridProjects = projects.backend;
  else if (activeTab === "launcher") gridProjects = projects.launcher;
  else if (activeTab === "sdk") gridProjects = projects.sdk;
  else if (activeTab === "projectz") gridProjects = projects.projects;
  else if (activeTab === "tools") gridProjects = projects.tools;
  else if (activeTab === "builds") gridProjects = projects.builds;

  // For overlay/shrink effect
  const panelOpen = !!selectedProject;

  // Set CSS variables for theme on body or root
  useEffect(() => {
    document.body.style.setProperty('--theme-gradient-from', themeVars.gradientFrom);
    document.body.style.setProperty('--theme-gradient-to', themeVars.gradientTo);
    document.body.style.setProperty('--theme-hover', themeVars.hover);
    document.body.style.setProperty('--theme-shadow', themeVars.shadow);
    document.body.style.setProperty('--theme-card-glow', themeVars.cardGlow);
    document.documentElement.style.setProperty('--theme-card-glow', themeVars.cardGlow);
    document.body.style.setProperty('--theme-panel', themeVars.panel);
    document.body.style.setProperty('--theme-border', themeVars.cardBorder);
    // Always use panel color as background
    document.body.style.background = themeVars.panel;
  }, [theme, themeVars]);

  // Custom Announcement and ProjectCard with theme support
  function ThemedAnnouncement() {
    const [currentIndex, setCurrentIndex] = useState(0);
    const total = announcementsData.length;
    const [active, setActive] = useState(false);
    const ref = useRef(null);
    // Animation state
    const [prevIndex, setPrevIndex] = useState(0);
    const [slideDir, setSlideDir] = useState(0); // 1: right, -1: left, 0: none
    useEffect(() => {
      if (currentIndex > prevIndex) setSlideDir(1);
      else if (currentIndex < prevIndex) setSlideDir(-1);
      else setSlideDir(0);
      setPrevIndex(currentIndex);
    }, [currentIndex]);
    const prev = () => setCurrentIndex((currentIndex - 1 + total) % total);
    const next = () => setCurrentIndex((currentIndex + 1) % total);
    const current = announcementsData[currentIndex];
    const handleMouseMove = (event) => {
      if (!ref.current) return;
      const rect = ref.current.getBoundingClientRect();
      const x = event.clientX;
      const y = event.clientY;
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const dist = Math.hypot(centerX - x, centerY - y);
      if (dist <= 100) {
        if (!active) setActive(true);
        // Update CSS variables for gradient position
        const relX = x - rect.left;
        const relY = y - rect.top;
        ref.current.style.setProperty('--x', relX + 'px');
        ref.current.style.setProperty('--y', relY + 'px');
      } else {
        if (active) setActive(false);
      }
    };
    // Slide direction: slide in from right if next, left if prev
    // Set translateX to 0 when active, to 100% or -100% when inactive
    // We'll use a key to force React to remount the announcement on index change
    return e('div', {
      ref,
      className: `w-full h-full flex justify-center items-center relative`,
      style: {
        '--theme-gradient-from': themeVars.gradientFrom,
        '--theme-gradient-to': themeVars.gradientTo
      }
    },
      e('div', {
        key: currentIndex,
        className:
          `w-full h-full flex justify-center items-center relative outline-glow transition-transform duration-500 ease-in-out${active ? ' active' : ''}`,
        onMouseMove: handleMouseMove,
        onMouseLeave: () => setActive(false),
        onMouseEnter: () => setActive(true),
        style: {
          transform: `translateX(0)`,
          // For accessibility, we don't animate on first render
        }
      },
        e('div', { className: "relative max-w-4xl flex flex-col justify-center items-center space-y-6 w-full h-full px-6" },
          e('img', { src: current.image, alt: current.title, className: "rounded-xl mx-auto max-w-full max-h-[60vh] object-contain" }),
          e('h2', { className: "text-4xl font-bold text-white" }, current.title),
          e('p', { className: "text-white text-lg max-w-3xl" }, current.text),
          e('div', { className: "absolute top-1/2 left-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: prev, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') prev(); } },
            e('span', { className: "text-white" }, "â€¹")
          ),
          e('div', { className: "absolute top-1/2 right-4 -translate-y-1/2 cursor-pointer text-white select-none text-3xl font-bold", onClick: next, role: "button", tabIndex: 0, onKeyDown: (e) => { if(e.key === 'Enter') next(); } },
            e('span', { className: "text-white" }, "â€º")
          ),
          e('div', { className: "flex justify-center space-x-2 mt-6" },
            announcementsData.map((_, idx) =>
              e('span', {
                key: idx,
                className: `w-3 h-3 rounded-full cursor-pointer ${idx === currentIndex ? themeVars.dotActive : themeVars.dotInactive} text-white`,
                onClick: () => setCurrentIndex(idx),
                role: "button",
                tabIndex: 0,
                onKeyDown: (e) => { if(e.key === 'Enter') setCurrentIndex(idx); }
              })
            )
          )
        )
      )
    );
  }

  function ThemedProjectCard(props) {
    // Same logic as ProjectCard but with dynamic theme on outline-glow
    const [active, setActive] = useState(false);
    const [expanded, setExpanded] = useState(false);
    const ref = useRef(null);
    // Border should be transparent unless cursor is close
    const handleMouseMove = (event) => {
      if (!ref.current) return;
      const rect = ref.current.getBoundingClientRect();
      const x = event.clientX;
      const y = event.clientY;
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const dist = Math.hypot(centerX - x, centerY - y);
      setActive(dist <= 100);
    };
    const showReadMore = props.description && props.description.length > 20;
    const collapsedDesc = props.description ? props.description.slice(0, 20) + "..." : "";
    // Accept style prop for slide-in animation
    const cardStyle = Object.assign({
      transition: "transform 0.5s ease-in-out, min-height 0.2s, box-shadow 0.2s",
      minHeight: expanded ? "8.5em" : "6.5em",
      cursor: props.onClick ? "pointer" : undefined,
      '--theme-gradient-from': themeVars.gradientFrom,
      '--theme-gradient-to': themeVars.gradientTo,
      border: active ? `2px solid ${themeVars.cardBorder}` : `2px solid transparent`
    }, props.style || {});
    // For button hover
    const readMoreBtnRef = useRef(null);
    const downloadBtnRef = useRef(null);
    // Custom hover handlers for buttons
    const handleBtnMouseEnter = (ref) => {
      if (ref.current) ref.current.style.border = `2px solid ${themeVars.cardBorder}`;
    };
    const handleBtnMouseLeave = (ref) => {
      if (ref.current) ref.current.style.border = "2px solid transparent";
    };
    return e('div', {
      ref,
      className: `w-[200px] bg-transparent rounded-2xl shadow-xl p-8 text-center relative outline-glow group flex flex-col justify-center items-center transition-all duration-200${active ? ' active' : ''}`,
      style: cardStyle,
      onMouseEnter: (e) => setActive(true),
      onMouseLeave: () => setActive(false),
      onMouseMove: handleMouseMove,
      onClick: props.onClick
    },
      props.image && e('img', {
        src: props.image,
        alt: props.title + " logo",
        className: "w-16 h-16 mx-auto rounded mb-2 object-cover"
      }),
      e('h3', { className:"text-2xl font-bold mb-4 text-white" }, props.title),
      e('p', {
        className:"text-white mb-4 transition-all duration-200",
        style: expanded || !showReadMore
          ? {}
          : { overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis', minHeight: '1.75em' }
      },
        expanded || !showReadMore ? props.description : collapsedDesc
      ),
      showReadMore &&
        e('button', {
          ref: readMoreBtnRef,
          onClick: (event) => { event.stopPropagation(); setExpanded(!expanded); },
          className: "text-sm mt-2 hover:underline",
          style: {
            background: "transparent",
            padding: "0.25rem 0.5rem",
            color: "#fff",
            border: "2px solid transparent",
            transition: "border 0.3s ease, box-shadow 0.3s ease"
          },
          onMouseEnter: () => handleBtnMouseEnter(readMoreBtnRef),
          onMouseLeave: () => handleBtnMouseLeave(readMoreBtnRef)
        }, expanded ? "Read Less" : "Read More"),
      e('div', { className:"flex justify-center space-x-2 mt-2" },
        props.repo && e('a', {
          href:props.repo,
          target:"_blank",
          rel:"noopener noreferrer",
          className:"flex items-center space-x-2 hover:text-blue-400",
          onClick: (event) => event.stopPropagation()
        },
          e('img', {
            src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg",
            alt: "GitHub",
            style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
            className: "inline-block"
          })
        ),
        props.discord && e('a', {
          href:props.discord,
          target:"_blank",
          rel:"noopener noreferrer",
          className:"flex items-center space-x-2 hover:text-blue-400",
          onClick: (event) => event.stopPropagation()
        },
          e('img', {
            src: "https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/discord.svg",
            alt: "Discord",
            style: { width: 20, height: 20, display: "inline-block", filter: "invert(1)" },
            className: "inline-block"
          })
        )
      ),
      // Download button (if downloadLink is provided)
      props.downloadLink && e('div', { className: "mt-2" },
        e('button', {
          ref: downloadBtnRef,
          onClick: (event) => {
            event.stopPropagation();
            const a = document.createElement('a');
            a.href = props.downloadLink;
            a.download = '';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          },
          className: "px-3 py-1 rounded-lg text-white text-sm",
          style: {
            background: "transparent",
            padding: "0.25rem 0.5rem",
            color: "#fff",
            border: "2px solid transparent",
            transition: "border 0.3s ease, box-shadow 0.3s ease"
          },
          onMouseEnter: () => handleBtnMouseEnter(downloadBtnRef),
          onMouseLeave: () => handleBtnMouseLeave(downloadBtnRef)
        }, "Download")
      )
    );
  }

  function ThemedProjectGrid({ projects, onProjectClick }) {
    // Custom handler to close and open the side panel smoothly
    const handleCardClick = (project) => {
      setSelectedProject(null);
      setTimeout(() => {
        setSelectedProject(project);
      }, 20);
    };
    // Slide-in animation for grid container: cards slide in one by one
    const [mounted, setMounted] = useState(false);
    useEffect(() => { setMounted(true); }, []);
    return e('div', {
      className: "flex flex-wrap justify-start gap-4",
    },
      projects.map((p, i) =>
        e(ThemedProjectCard, {
          ...p,
          key: i,
          onClick: onProjectClick ? (() => handleCardClick(p)) : undefined,
          style: {
            transform: mounted ? 'translateX(0)' : 'translateX(100%)',
            transition: `transform 0.5s ease-out ${i * 0.1}s`
          }
        })
      )
    );
  }

  // SettingsPanel
  function ThemedSettingsPanel(props) {
    // Patch SettingsPanel to add border-on-hover to theme buttons
    const themes = [
      { name: "Black & Blue", gradient: "blue", colors: { from: "#2563eb", to: "#60a5fa", hover: "#3b82f6" } },
      { name: "Black & Red", gradient: "red", colors: { from: "#dc2626", to: "#f87171", hover: "#ef4444" } },
      { name: "Black & Purple", gradient: "purple", colors: { from: "#9333ea", to: "#a78bfa", hover: "#a21caf" } },
      { name: "EpicGames", gradient: "epic", colors: { button: "#0078ff", panel: "#1a1a1a", cardBorder: "#0078ff" } }
    ];
    // For each button, manage a ref for border on hover
    const btnRefs = React.useRef([]);
    // Use themeVars from outer scope
    return (
      e('div', { className: "flex flex-col items-center space-y-4 p-4" },
        e('h2', { className: "text-xl font-bold text-white mb-4" }, "Select Theme"),
        themes.map((themeObj, i) =>
          e('button', {
            key: themeObj.name,
            ref: (el) => btnRefs.current[i] = el,
            onClick: () => props.setTheme(themeObj.gradient),
            className:
              "w-full py-2 px-4 rounded-lg bg-gray-800 text-white transition-colors" +
              (props.currentTheme === themeObj.gradient ? " ring-2 ring-offset-2 ring-white" : ""),
            style:
              props.currentTheme === themeObj.gradient
                ? (
                    themeObj.gradient === "epic"
                      ? { background: themeObj.colors.button, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
                      : { background: `linear-gradient(90deg, ${themeObj.colors.from}, ${themeObj.colors.to})`, color: "#fff", border: `2px solid ${themeVars.cardBorder}` }
                  )
                : themeObj.gradient === "epic"
                  ? { background: "#23272e", color: "#fff", border: "2px solid transparent", transition: "border 0.3s ease, background 0.3s ease" }
                  : { border: "2px solid transparent", transition: "border 0.3s ease, background 0.3s ease" },
            onMouseEnter: (e) => {
              if (btnRefs.current[i]) btnRefs.current[i].style.border = `2px solid ${themeVars.cardBorder}`;
            },
            onMouseLeave: (e) => {
              if (btnRefs.current[i]) btnRefs.current[i].style.border = "2px solid transparent";
            }
          }, themeObj.name)
        )
      )
    );
  }

  // Main return
  return e('div', {
      className: "flex h-screen text-white relative",
      style: {
        '--theme-gradient-from': themeVars.gradientFrom,
        '--theme-gradient-to': themeVars.gradientTo
      }
    },
    e(Sidebar, { activeTab, setActiveTab }),
    e('main', {
      className:
        "flex-1 overflow-y-auto p-8 flex flex-col gap-2 transition-all duration-300",
      style: panelOpen
        ? { transform: "scale(0.97)", filter: "blur(2px)", transition: "all 0.3s" }
        : { transform: "scale(1)", filter: "blur(0)" }
    },
      activeTab === "settings"
        ? e(ThemedSettingsPanel, { setTheme })
        : activeTab === "announcements"
          ? e(ThemedAnnouncement)
          : gridProjects.length > 0
            ? e(ThemedProjectGrid, { projects: gridProjects, onProjectClick: setSelectedProject })
            : null
    ),
    panelOpen && e(ProjectSidePanel, { project: selectedProject, onClose: () => setSelectedProject(null) })
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(e(App));
</script>
</body>
</html>